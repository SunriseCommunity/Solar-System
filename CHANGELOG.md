<!-- markdownlint-disable -->
<!-- eslint-disable markdown/no-missing-label-refs -->
# Changelog

### All notable changes to this project will be documented in this file.

![462894956-551fc5b1-2f73-4792-9284-2c2f3452e42b](https://github.com/user-attachments/assets/1dbddcfa-1b08-4a04-8f64-bfbe8c5dcc45)


## [Unreleased]


[[cf73349](https://github.com/SunriseCommunity/Solar-System/commit/cf73349f77d654862768cda5d3f950de96d1576e)...[45ed3fa](https://github.com/SunriseCommunity/Solar-System/commit/45ed3fa637ad89a0924de4369f2add0329b23811)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/cf73349f77d654862768cda5d3f950de96d1576e...45ed3fa637ad89a0924de4369f2add0329b23811))


### ‚öôÔ∏è Miscellaneous Tasks

- Update submodule [`(45ed3fa)`](https://github.com/SunriseCommunity/Solar-System/commit/45ed3fa637ad89a0924de4369f2add0329b23811)


- Update CHANGELOG.md [`(cf73349)`](https://github.com/SunriseCommunity/Solar-System/commit/cf73349f77d654862768cda5d3f950de96d1576e)





### üåá Sunset

#### <!-- 0 -->üöÄ Features

- Get server status link from NEXT_PUBLIC_STATUS_PAGE_LINK

#### <!-- 7 -->‚öôÔ∏è Miscellaneous Tasks

- Update copyright year



## [0.0.9] - 2026-01-06


[[4ea0f8f](https://github.com/SunriseCommunity/Solar-System/commit/4ea0f8f6789ead5a8bd7b70fe18674bf326ad723)...[ea19a56](https://github.com/SunriseCommunity/Solar-System/commit/ea19a56315438d69a07146352d2c5f1720c23635)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/4ea0f8f6789ead5a8bd7b70fe18674bf326ad723...ea19a56315438d69a07146352d2c5f1720c23635))


### üöÄ Features

- Return Sunrise onto master branch [`(ea19a56)`](https://github.com/SunriseCommunity/Solar-System/commit/ea19a56315438d69a07146352d2c5f1720c23635)



### ‚öôÔ∏è Miscellaneous Tasks

- Update CHANGELOG.md [`(4ea0f8f)`](https://github.com/SunriseCommunity/Solar-System/commit/4ea0f8f6789ead5a8bd7b70fe18674bf326ad723)





### üåÖ Sunrise

#### <!-- 13 -->üíº Other

- Merge pull request #92 from SunriseCommunity/feat/better-telemetry

#### <!-- 7 -->‚öôÔ∏è Miscellaneous Tasks

- Update README.md



## [0.0.8] - 2026-01-06


[[5ab4518](https://github.com/SunriseCommunity/Solar-System/commit/5ab45187bfc302df7af6f8672b70fd69b9ccec15)...[e43a9b6](https://github.com/SunriseCommunity/Solar-System/commit/e43a9b6c273c372756d46b27fab5a4931b8b25f9)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/5ab45187bfc302df7af6f8672b70fd69b9ccec15...e43a9b6c273c372756d46b27fab5a4931b8b25f9))


### üöÄ Features

- Add uptime-kuma [`(0a782f5)`](https://github.com/SunriseCommunity/Solar-System/commit/0a782f5244f42a67c64c793f20127ae35bcb660b)


- Add generate-api-sunrise-key.sh [`(b009fd9)`](https://github.com/SunriseCommunity/Solar-System/commit/b009fd9ae160fc8a9654ed55c96a9a9d57e88d5b)


- Add Caddyfile [`(933a520)`](https://github.com/SunriseCommunity/Solar-System/commit/933a52062bdefeeecd60b8b45f336f49321b6bf8)


- Upload missing grafana dashboards [`(a37d434)`](https://github.com/SunriseCommunity/Solar-System/commit/a37d434b804ab1db5f6b26639953cbf447bf0983)



### üêõ Bug Fixes

- Include NEXT_PUBLIC_SERVER_DOMAIN in the environment for sunset [`(93e93fb)`](https://github.com/SunriseCommunity/Solar-System/commit/93e93fb002248340d4995d824afa4a73999a49e4)


- Cliff don't override observatory submodule name to the solar system [`(bab87e3)`](https://github.com/SunriseCommunity/Solar-System/commit/bab87e30aabe793f41a8baa744213cd29dfd011d)



### ‚öôÔ∏è Miscellaneous Tasks

- Update submodules [`(e43a9b6)`](https://github.com/SunriseCommunity/Solar-System/commit/e43a9b6c273c372756d46b27fab5a4931b8b25f9)


- Add new observatory env [`(e46a87d)`](https://github.com/SunriseCommunity/Solar-System/commit/e46a87db9ae5ed33a02375ffe73ca09f611d00e1)


- Remove extraneous spaces for uptime kuma spaces [`(1555585)`](https://github.com/SunriseCommunity/Solar-System/commit/1555585609291dc49d8ae02449ff63432c04300b)


- Update Sunrise [`(90e40ca)`](https://github.com/SunriseCommunity/Solar-System/commit/90e40ca358e204891bc74011a8dccfe85f48e287)


- Move setup files into lib folder [`(2d043ff)`](https://github.com/SunriseCommunity/Solar-System/commit/2d043ffa357f7d7d2bb729ac3c29f4e02fda6730)


- Prettify .env.example file [`(835c15d)`](https://github.com/SunriseCommunity/Solar-System/commit/835c15db48af48eaf4c86cc21eb2f74408f56a9f)


- Move image preview higher [`(1b686ab)`](https://github.com/SunriseCommunity/Solar-System/commit/1b686ab5ce8f5f683d6e0a1630739f91cb2a7026)


- Update README.md [`(2f12ae5)`](https://github.com/SunriseCommunity/Solar-System/commit/2f12ae5427decb9ff49cbad40ec137cbf2b48a8b)


- Upload image [`(258a257)`](https://github.com/SunriseCommunity/Solar-System/commit/258a2577e9c8777aabec57d430d9a56b99f2c811)


- Update CHANGELOG.md [`(5ab4518)`](https://github.com/SunriseCommunity/Solar-System/commit/5ab45187bfc302df7af6f8672b70fd69b9ccec15)





### üî≠ Observatory

#### <!-- 0 -->üöÄ Features

- Add SHOW_INTERNAL_VALUES_IN_PUBLIC_STATS_ENDPOINT env

#### <!-- 1 -->üêõ Bug Fixes

- Tests


### üåá Sunset

#### <!-- 0 -->üöÄ Features

- Update icon and add manifest.json



## [0.0.7] - 2026-01-04


[[ca612fc](https://github.com/SunriseCommunity/Solar-System/commit/ca612fc452e168f1d6e452ad668e2d5daaa28068)...[cce39c4](https://github.com/SunriseCommunity/Solar-System/commit/cce39c4aaa3cc0e6015a4968f43004c9a8b6f066)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/ca612fc452e168f1d6e452ad668e2d5daaa28068...cce39c4aaa3cc0e6015a4968f43004c9a8b6f066))


### üîÄ Merge Commits

- [chore] Merge Branch 'main' of https://github.com/SunriseCommunity/sunrise-instance [`(d1f6aa9)`](https://github.com/SunriseCommunity/Solar-System/commit/d1f6aa9f82c65e5803044bbd20ae8561da2be613)



### ‚öôÔ∏è Miscellaneous Tasks

- Update submodules [`(cce39c4)`](https://github.com/SunriseCommunity/Solar-System/commit/cce39c4aaa3cc0e6015a4968f43004c9a8b6f066)


- Update CHANGELOG.md [`(ca612fc)`](https://github.com/SunriseCommunity/Solar-System/commit/ca612fc452e168f1d6e452ad668e2d5daaa28068)






## [0.0.6] - 2026-01-04


[[8a36272](https://github.com/SunriseCommunity/Solar-System/commit/8a36272aa2c7b0ff93602b68bab1df54c2e4a0b8)...[3692168](https://github.com/SunriseCommunity/Solar-System/commit/369216862cd97905d5c3f4084f810479d7217b2d)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/8a36272aa2c7b0ff93602b68bab1df54c2e4a0b8...369216862cd97905d5c3f4084f810479d7217b2d))


### üöÄ Features

- Automatically update submodules if possible [`(8714507)`](https://github.com/SunriseCommunity/Solar-System/commit/87145073441e6df25a37c84feb4e38db3512c599)



### üîÄ Merge Commits

- [chore] Merge Branch 'main' of https://github.com/SunriseCommunity/sunrise-instance [`(561677d)`](https://github.com/SunriseCommunity/Solar-System/commit/561677d8ac55fd7b181f9aa439c6d1b37db01d28)



### ‚öôÔ∏è Miscellaneous Tasks

- Update submodules [`(3692168)`](https://github.com/SunriseCommunity/Solar-System/commit/369216862cd97905d5c3f4084f810479d7217b2d)


- Add emoji postprocessors [`(6155629)`](https://github.com/SunriseCommunity/Solar-System/commit/61556297e769783fbaf4fb0da6aa506456f91f88)


- Update CHANGELOG.md [`(148af1f)`](https://github.com/SunriseCommunity/Solar-System/commit/148af1f50952c7785b3de933dfea5cf4e737ab7f)


- Update cliff.toml [`(8a36272)`](https://github.com/SunriseCommunity/Solar-System/commit/8a36272aa2c7b0ff93602b68bab1df54c2e4a0b8)






## [0.0.5] - 2026-01-04


[[6cea499](https://github.com/SunriseCommunity/Solar-System/commit/6cea4994edb7dda2573f1a117bbe0f5ca4070290)...[6cea499](https://github.com/SunriseCommunity/Solar-System/commit/6cea4994edb7dda2573f1a117bbe0f5ca4070290)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/6cea4994edb7dda2573f1a117bbe0f5ca4070290...6cea4994edb7dda2573f1a117bbe0f5ca4070290))


### üîÄ Merge Commits

- [chore] Merge Branch 'main' of https://github.com/SunriseCommunity/sunrise-instance [`(6cea499)`](https://github.com/SunriseCommunity/Solar-System/commit/6cea4994edb7dda2573f1a117bbe0f5ca4070290)






## [0.0.4] - 2026-01-04


[[85378c0](https://github.com/SunriseCommunity/Solar-System/commit/85378c060c0221730a7efb40d145a4d5a6eb9fa8)...[72871bd](https://github.com/SunriseCommunity/Solar-System/commit/72871bd6c250e5323b5cb994b9735302f411fa36)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/85378c060c0221730a7efb40d145a4d5a6eb9fa8...72871bd6c250e5323b5cb994b9735302f411fa36))


### üöÄ Features

- Prettify changelog [`(a14daab)`](https://github.com/SunriseCommunity/Solar-System/commit/a14daabcedad2a12fdb502ba98657d82ac8c0974)


- [dependency] Update cliff version [`(85378c0)`](https://github.com/SunriseCommunity/Solar-System/commit/85378c060c0221730a7efb40d145a4d5a6eb9fa8)



### ‚öôÔ∏è Miscellaneous Tasks

- Update CHANGELOG.md [`(72871bd)`](https://github.com/SunriseCommunity/Solar-System/commit/72871bd6c250e5323b5cb994b9735302f411fa36)






## [0.0.3] - 2026-01-04


[[decb6f5](https://github.com/SunriseCommunity/Solar-System/commit/decb6f580e37cd6dc062e733bacf9b5fee4926c9)...[decb6f5](https://github.com/SunriseCommunity/Solar-System/commit/decb6f580e37cd6dc062e733bacf9b5fee4926c9)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/decb6f580e37cd6dc062e733bacf9b5fee4926c9...decb6f580e37cd6dc062e733bacf9b5fee4926c9))


### üêõ Bug Fixes

- Use steps.version.outputs.new_version for tag name [`(decb6f5)`](https://github.com/SunriseCommunity/Solar-System/commit/decb6f580e37cd6dc062e733bacf9b5fee4926c9)






## [0.0.2] - 2026-01-04


[[259de11](https://github.com/SunriseCommunity/Solar-System/commit/259de11d5dee7ac60c44b6960e6e922ce1ef108b)...[884c1de](https://github.com/SunriseCommunity/Solar-System/commit/884c1de4f915363320a83f735e35c04648486887)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/259de11d5dee7ac60c44b6960e6e922ce1ef108b...884c1de4f915363320a83f735e35c04648486887))


### üöÄ Features

- On worfklow create release tag [`(884c1de)`](https://github.com/SunriseCommunity/Solar-System/commit/884c1de4f915363320a83f735e35c04648486887)


- Add Sunshine submodule [`(259de11)`](https://github.com/SunriseCommunity/Solar-System/commit/259de11d5dee7ac60c44b6960e6e922ce1ef108b)





### üåª Sunshine

#### <!-- 0 -->üöÄ Features

- Allow link account by user id
- Lint
- Return only 2 fraction of digits for star rating
- Add action-store utility tests
- Add pagination button tests
- Add beforeEachCleanup for each test + cleanup;
- Add unlink subcommand tests
- Add scores subcommand tests
- Add recent score subcommand tests
- Add profile subcommand tests
- Add score subcommand tests
- Add tests for run pagination set page modal func
- Add workflows/test.yml
- Add tests for parse method of pagination set page model;
- Create Mocker and FakerGenerator;
- Default to dev if env is not prod or dev for both json and environment values;
- Feat: Use throw ExtendedError for custom errors;
chore: Remove unneeded console.log;
- Implement pagination through interaction-handlers;
- Add action-store utility;
- Implement extended error;
- Feat: Implement scores osu subcommand;
feat: Add pagination utility;
- Show users grades and number of first places count in profile embed;
- Enhance chat input commands listeners;
- Feat: Add Dockerfile and docker-compose.yml
chore: Update .env.example
chore: Update package.json
- Refactor osu.commands to dynamically register and call sucommands;
- Add recent score (rs) osu subcommand;
- Try to get users osu_user_id from database for profile osu subcommand;
- Implement link/unlink osu subcommands;
- Add sqlite bun database with migrations;
- Add activity presence;
- View only relevant hits for score;
- Add CustomBeatmapStatusChangeListener;
- Parse timeout message to descriptions embed;
- Add ChatInputCommandDenied listener;
- Add new score listener;
- Add score osu subcommand;
- Feat: Add profile osu subcommand;
feat: Add embed presets;
- Init sapphire base;
- Update LICENSE

#### <!-- 1 -->üêõ Bug Fixes

- Update expected error messages to match upstream
- Ignore unfilled requiredEnvVariables for testing env;
- Fix repo url in README.md

#### <!-- 13 -->üíº Other

- Properly register string options for link command. blame discord.
- Merge pull request #3 from SunriseCommunity/feat/allow-using-user-id-to-link-account
- Merge pull request #2 from SunriseCommunity/feat/use-eslint-as-linter
- Merge pull request #1 from SunriseCommunity/feat/implement-tests-for-commands
- Clean up faker test mocks
- Update README.md
- Initial commit

#### <!-- 6 -->üß™ Testing

- Add test for link osu subcommand;
- Add test for meow command;

#### <!-- 7 -->‚öôÔ∏è Miscellaneous Tasks

- Update README.md (not yet)
- Update README.md
- Update deprecated userName faker methods to username.
- Update error handling to use ProblemDetailsResponseType;
- Disable select page button until it will get implemented;
- Move emojis folder;
- Chore: Update dev.json
chore: Add assets/emojis
- Chore: Update hey-api types;
feat: Use generated WebSocketEventType for websockets events;
feat: Mention reason for closing connection for websocket;



## [0.0.1] - 2026-01-04


[[4c9c7aa](https://github.com/SunriseCommunity/Solar-System/commit/4c9c7aacf9126d0415606e5397c7f477033c547d)...[4238bf9](https://github.com/SunriseCommunity/Solar-System/commit/4238bf985ccacd117c60464afca7b3594d79b19a)]([compare](https://github.com/SunriseCommunity/Solar-System/compare/4c9c7aacf9126d0415606e5397c7f477033c547d...4238bf985ccacd117c60464afca7b3594d79b19a))


### üöÄ Features

- Give contents write permission to the workflow [`(ae25d91)`](https://github.com/SunriseCommunity/Solar-System/commit/ae25d91672e99200c32317072d0a6dd938b6194a)


- Set up git cliff in release workflow [`(0514de1)`](https://github.com/SunriseCommunity/Solar-System/commit/0514de1b5ede3568333d14c131da5a3a45ee4069)


- Add release workflow [`(46826d4)`](https://github.com/SunriseCommunity/Solar-System/commit/46826d4a6087534c3ba70e37b3bccbb27abee950)


- Add deploy resources limits for discord bot adn website [`(907deff)`](https://github.com/SunriseCommunity/Solar-System/commit/907deff2d2c5f22c79276540d86413b2dabd6893)


- Add Sunshine [`(26503fc)`](https://github.com/SunriseCommunity/Solar-System/commit/26503fc978d0fe4346dc0d6ca48d6f91a1a29883)


- Prepare .env.example for default usage with HTTP [`(d95312d)`](https://github.com/SunriseCommunity/Solar-System/commit/d95312dac2e27bd946fab1260e5995069d3d8da2)


- Add docker compose dev [`(8527f38)`](https://github.com/SunriseCommunity/Solar-System/commit/8527f389694135ccf8b68edcc89ac64a9a253ec2)


- Add Sunset [`(801c95a)`](https://github.com/SunriseCommunity/Solar-System/commit/801c95ae4b1dcebc01da965e0ce74029fa5a4a4e)


- Setup .example files [`(95551ce)`](https://github.com/SunriseCommunity/Solar-System/commit/95551cef3c0cab430c7c6ab527cdb8901568aa45)


- Update submodules [`(ebefae8)`](https://github.com/SunriseCommunity/Solar-System/commit/ebefae801041d2981d02981615458b88643db69a)



### üêõ Bug Fixes

- Cliff.toml config [`(4603c7a)`](https://github.com/SunriseCommunity/Solar-System/commit/4603c7af828c861ea632153941bb4a7153e85e41)



### üíº Other

- Add modules and dev-monitoring [`(de06d0b)`](https://github.com/SunriseCommunity/Solar-System/commit/de06d0b3ce6095ef84cbe7b68347edf439a839ab)


- Initial commit [`(4c9c7aa)`](https://github.com/SunriseCommunity/Solar-System/commit/4c9c7aacf9126d0415606e5397c7f477033c547d)



### ‚öôÔ∏è Miscellaneous Tasks

- Update CHANGELOG.md [`(4238bf9)`](https://github.com/SunriseCommunity/Solar-System/commit/4238bf985ccacd117c60464afca7b3594d79b19a)





### üî≠ Observatory

#### <!-- 0 -->üöÄ Features

- Set on cooldown for empty responses + add timeoutIndefiniteMultiplier
- Don't fetch beatmapset for md5 and beatmp id requests if couldn't fetch initial beatmap
- Do lint on ci
- Use @richardscull/eslint-config instead of prettier
- Add tests
- Implement osu direct beatmaps endpoints support
- Force typisation for the base api try catch responses
- Fix minor tsc compile errors w/ new production tests
- Add getBeatmapsetsByBeatmapIds with ability to fetch beatmaps from both local and mirror storage
- Basic getBeatmapsetsByBeatmapIds implementation
- Update some package.json dependencies versions
- Add ENABLE_CRON_TO_CLEAR_OUTDATED_BEATMAPS
- Add X-Data-Source header
- Show safe part of the config in the stats
- Add onCooldownUntil in stats
- Add tests
- Add DISABLE_DAILY_RATE_LIMIT and fix writing into get config for rate-limiter
- Add timeout for all requests of 10 seconds
- Show more stats and ratelimits for capacities in API
- Apply DisableSafeRatelimitMode on config object level
- Add tests
- [dependency] Update rosu-pp-js version and implement HitResultPriority.Fastest usage
- Add tests
- Lock docker containers versions
- Reset system time after chaning it in test
- Set cooldown for any 5xx error code starting from 502
- Revert removed testing files
- Omit wait for docker compose
- Give mroe time to postgres healthcheck
- Update healthcheck for postgres
- Wait for docker to run and skip db migration if not needed
- Flush redis db before tests
- Add test.yml workflow
- Explain compitability tests purpose
- Clear outdated requests from memory
- Add Specific cases tests
- Improve getClientWeight logic
- Add download test cases
- Return 502 instead of 500 if we coudln't use any of implemented endpoints to fetch data
- Add more tests /w deprecation of unused ClientAbilities
- Disable IsAutomatedTesting in mirror.test.ts
- Update all domains to include abilities in the rateLimits and early return if !result.data
- Throw on any API request if is in testing mode
- Implement mirrors.manager.test.ts
- Move observatory docker instructions into the Dockerfile
- Make LOKI_HOST not required
- Trim names of mirros to ignore;
- Add short-lived cache for search endpoint;
- Add daily rate limiter (blame mino)
- Save set from mino/osulabs beatmap /md5 and /b endpoints;
- Add safe ratelimit mode
- Add ability to search beatmap by array of statuses;
- Add cron job to delete old beatmapsets from database;
- Change @richardscull/rosu-pp-js to rosu-pp-js;
- Add restart policy for loki
- Update request Date after the request is finished
- Feat: Use @richardscull/rosu-pp-js;
test: Update pp values to new rework values;
fix: Use CalculatorManager as interface for tests;
- Use CalculatorManager as core interface for calculations;
- Add osulabs as new mirror;
- Add new request to ratelimit before the request is sent, to not be dependent on the time of the request to be sent;
- Add isScoreFailed field;
- If beatmapHash provided in body calculate hash for osu file and compare;
- Feat: Create singletone axios instance;
ref: Remove chained .then.catch for all axios methods, replace by try catch block;
- Add `/stats` endpoint;
- Feat: Create new mirror classes only if needed;
feat: Return 501 if none of the mirrors support needed method;
feat: If calculation of clients weight wasn't complete yet, use any client from the allowed clients;
- Return custom error status code for server error requests;
- Add ability to ignore mirror by mentioning his short name in the .env file;
- Update README.md
- Add tests for calculator;
- Make acc for beatmap calculator optional;
- Use free to clear beatmap from memory after calculation;
- Add basic calculator endpoints (score and beatmap calculations);
- Add content length to axios response log
- Update UserCompact Id type
- Always restart observatory
- Deprecate okayuclient;
- Feat: Add /osu route to bancho;
fix: For json requests in benchmark ignore 404 requests;
- Remove /beatmapsets and beatmaps?full= option;
- Feat: Add /osu API path with file saving and caching;
feat: Add Mino route for downloading .osu files
- Set ratelimit cooldown if status is 502;
- Make onCooldownUntil as general value to all rate limit routes
- Feat: Add /beatmapsets with Mino API;
fix: Filter null beatmaps from /beatmaps in Mino API
- Add Mino API for /beatmaps
- Add /beatmaps endpoint with Bancho API
- Add /serach endpoint with Mino API
- Feat: Get mirror benchmark data from old requests, or fetch new data if needed;
feat!: Save content_type and download_speed in Requests scheme
fix!: Drop benchmarks table;
- Add Okayu client
- Feat: Add nerinyan client to tests;
fix: Use gatari client for gatari tests
- Feat: Add nerinyan mirror;
feat: If no default ratelimit is provided, set default 60 to 60.
- Add redirect from "/" to "/docs"
- Add Gatari Client
- Parse data as full response if included
- Feat: Add storage-files.service;
feat: Save beatmapsets for X time;
feat: Use saved beatmapsets as responses;
- Implement .env fields to control Rate-Limit
- Add optional IGNORE_RATELIMIT key
- Add ?full query for v2/b and v2/md5
- Feat: Add redis caching;
feat: Add db schemas for beatmap and beatmapset;
feat: Store beatmap and beatmapset for X ttl in db;
feat: Use redis as caching for db
- Add tests
- Add mino endpoints
- Edit exponentialIncrease function (lack of it) for mirrors weights
- Feat: Use convert service:
chore(direct): Remove API endpoints, has not enough data
- Update DB schema of benchmark;
- Feat: Add error code to api response;
feat: Distinct 500+ from 400+ statuses;
chore: Clear unused files;
- Feat: Add Requests entity to DB;
feat: Calcualte weight of mirror server;
feat: Better logging for api requests
- Feat: Multiple routes on single route limiter for client
feat: Add ability to rate limiter to get capacity of rate limiter on demand
- Add X-Request-ID header to requests
- Feat: Add rate limiters for mirrors;
feat: Add download endpoint;
feat: Add abilities for mirrors;
feat: Add required ability to an algorithm for mirror selection;
feat: Add mirror benchmark service;
feat: Add mirror and benchmark schemas;
chore: Remove unnecessary files;
chore: Add prettier
- Add manager for mirror clients
- Add loki, DrizzleORM and Grafana
- Init project

#### <!-- 1 -->üêõ Bug Fixes

- Use jiti
- Lint
- Enrich getBeatmapSetsByBeatmapIds with converts
- Add .dockerignore
- Update bun.lock
- Include mods for beatmap convert
- Docker compose file formatting
- FIx assertions and simplify code;
- BeatmapsetGenre id can be null;
- Fix!: Change all TTL switch cases to properly handle each case;
fix!: Return null for getBeatmapSetById if any of beatmaps is expired;
chore: Set lower redis TTL for beatmaps;
ref: Use innerJoin to get beatmaps for beatmapset;
feat: Set validUntil for beatmap set using lowest TTL of beatmaps;
ref: move splitByCondition to utils;
- Filter old requests for getting remaining ratelimits requests
- Spelling mistake
- Use BooleanString for all query optional boolean values;
- If can't find beatmap(set) in cache and db, don't set it's cache to null;
- Add shell type for related_tags
- Add new shell types for both mino and bancho
- Ignore getting downloadSpeed for arraybuffer if is AxiosError;
- Fix: Support AxiosError response;
fix: Set cooldown of one hour if got 403;
- Fix: lowercase mino rate limit header;
fix: use updated rate limit value if value and header not equal;
- If no latency, use -1, not string. Like even why TS let me write a string there ???
- Fix: b/ and md5/ routes returned data, not data.data;
feat: Add full query for /beatmaps
- Ignoring different rate limits
- Install dependencies for docker-compose
- Fix!: Redo previous migration to ignore error during changing name of table with beatmaps;
feat: Add beatmapsets_files scheme;
- Make config properly parse .env files
- If beatmap by hash wasn't found, return undefined;

#### <!-- 10 -->‚óÄÔ∏è Revert

- Add timeout
- Create singletone axios instance;

#### <!-- 11 -->üîÄ Merge Commits

- [chore] Merge Branch 'main' of https://github.com/SunriseCommunity/Observatory

#### <!-- 13 -->üíº Other

- Merge pull request #9 from SunriseCommunity/fix/use-jiti
- Merge pull request #8 from SunriseCommunity/feat/use-eslint-as-linter
- Merge pull request #7 from SunriseCommunity/feat/add-osu-direct-beatmaps-endpoints
- Fix calcualtor
- Merge pull request #6 from SunriseCommunity/feat/add-search-in-local-database
- Merge pull request #5 from SunriseCommunity/feat/update-stats-api-route
- Merge pull request #4 from SunriseCommunity/fix/apply-mods-for-beatmap-convert
- Merge pull request #3 from SunriseCommunity/feat/enchanced-testing
- Move test folder and disable mirror.test for general usage;
- Update .env.example
- Update README.md
- Cut osulabs abilities;
- Update README.md
- Merge pull request #2 from SunriseCommunity/feat/implement-2025-03-06-pp-rework

Implement 2025-03-06 pp rework
- Add id typisation in params;
- Merge pull request #1 from SunriseCommunity/feat/add-pp-calculators

Feat: Add pp calculators
- Update README.md
- Create LICENSE
- Add beatmap mirrors
- Initial commit

#### <!-- 7 -->‚öôÔ∏è Miscellaneous Tasks

- Remove unneeded null type from responses, since its already assumed in the ResultWithStatus
- Remove unused ClientAbilities entry
- Add TODO for search endpoint
- Update logMessage to include daily requests limit;
- Disable osulabs by default in .env.example because its not cooked well
- Downgrade rosu-pp-js version;
- Add healthchecks in docker container
- Update docker compose containers to have unless-stopped restart policy
- Remove console.log
- Open postgres ports
- Remove log message about missing deafult rate limit
- Change level of api rate limit message to warn if default route is missing;
- Add okayu client to list of usable Clients;
- Add docker-compose.yml for production
- Chore: Update .env
feat: Add OSZ_FILES_LIFE_SPAN as .env value
- Update README.md
- Restructure API endpoints
- Update README.md
- Chore: create describe for each mirror in tests;
chore: Ignore bancho if no token is provided;
chore: Edit .env.example
- Chore: Clean up:
fix: Let API latency be empty for comparison if doesn't has needed Ability
- Move and edit some types


### üåÖ Sunrise

#### <!-- 0 -->üöÄ Features

- AllowMissingNonBeatmapValues as fallback for beatmaps
- Use .env for db connections + ditch postgres in favour mysql for hangfire
- Make sunrise.pfx copy optional
- Remove metrics from docker compose
- Log slow queries
- Update mtrics
- Try to get HttpContext scope before creaing a new one
- Use parallelism for evaluating score medals + add tracing for it
- Use ConcurrentDictionary instead of List to make user ids in ChatChannel thread-safe
- Update logger factories to use serilog logger
- Add ApiHttpTraceAttribute and ServerHttpTraceAttribute
- Update Bootstrap and Configuration wtih bew Telemetry and logging
- Add Rougamo.OpenTelemetry with TraceExecutionAttribute
- Throttle ratelimit warning message to 30 seconds.
- Send a single notification if the score can't be processed due to beatmap mirror or ratelimits.
- Revert QueryModifier move and add tests
- Add searchByCustomStatus query variable for /beatmapset/search
- Add  BeatmapSetsDataByBeatmapIds
- Add redirect from osu. GET to the website domain
- Event log user restriction events
- Fix file naming
- Add GetUserEvents
- Add event loggers and tests for user actions
- Log events for avatar/banner change
- Include ip in user session and leave events in database for compitability
- Rename bancho Assets and User services
- Implement UserEventAction for all UserServices
- Decide if user can edit privilege depending on the highest in request vs users
- User can change only privileges lower than his
- Disallow dev privilege to override requirements for api privileged routes
- Add user edit privilege endpoint
- Obsolete RequestKey
- Add user/{id:int}/sensitive and fix small mistakes
- Add missing admin routes
- Add admin user routes and user user service
- Throw error during restrict player if any error occurs
- Add user sensitive search API endpoint
- Lock docker versions and update testing libraries
- Merge Redis and Database tests (they use the same fixture now)
- Reuse App and only recreate services w/ transfer fixture logic into IntegrationDatabaseFixture
- Clean up code and add try catches
- Clear database during the App init, not after.
- Force to clear redis while doing CleanupDatabaseAsync
- Cleanup database before test w/ try catch for datapath deletetion
- Update hangfire config
- Initilize docker before dotnet
- Wait for postgres to become healthy before tesiting
- Optimise database teardown (teardown only updated tables, use delete from)
- Use hardlink for Data folder copy if possible
- Include GitHubActionsTestLogger in Sunrise.Server.Tests
- Add GitHubActionsTestLogger
- Fallback to default HttpClientService implementation if no mock exists
- Add MockHttpClientService
- Add viewconfig command;
- Add test case for PacketUserPresenceRequestTests
- Add test cases for BanchoControllerPostTests
- If pp is over clients limit, show it as ranked score.
- Add redirect from /users/{id} to /user/{id}
- Show possible commands if users command is invalid;
- Add userprevioususernames command;
- Add hideprevioususername command
- Add new tests
- Add new performance calculation algorithm
- Add /previous-username API endpoint to view users prwevious usernames;
- Add UsernameChangeCooldownInDays config with default to 30;
- Enchance ProblemDetails class for OpenAPI scheme;
- Remove ErrorResponse;
- Add and implement usage of GetCurrentUserOrThrow;
- Add and implement usage of ApiErrorResponse;
- Use ProblemDetails instead of Response Objects with ErrorResponses
- Use DataAnnotations instead of hardcoded if checks for better readability of api controllers;
- Add country change admin command;
- Add check on a user changing their country to the same one.
- Use CountryCode type for Country of UserResponse object;
- Add TestChangeCountryToUnknownCountry
- Feat: Add CountryChangeCooldownInDays to config;
feat: Disallow setting unknown country;
- Feat: Add TestPromoteOtherUserCountryAfterChangeInMultipleGameModes
feat: Make TestRankChangeAfterCountryChange test for all gamemodes
- Feat: Add TestPromoteOtherUserCountryAfterChange;
chore: Rename ApiUserCountryChangeTest to ApiUserCountryChangeTests
- Update tracked entity if any is exist on UpdateEntity;
- Mock LocalProperties for BestScoreableRandomScore;
- Add support for user country changes.
- Add CustomBeatmapStatusChangeResponse to openapi;
- Add ResponseType for websocket route;
- Serialize object for websocket message with server's JsonOptions
- Add limit for concurrent websocket connections open for a single IP;
- Reject login if user is using old domain name;
- Mention previously registered username if user tries to create multiple accounts;
- Add migration to clear duplicates from user stats before setting unique index;
- Add db seeder to increment user ids to new format (id >= 1000);
- Add TestGetBeatmapSetWithCustomBeatmapStatus test case;
- Feat: Add option to disallow multiple hypes by same user;
feat: Add test case to check if user cant hype multiple beatmap sets
chore: Update configs to have more freely hype requirements and add new AllowMultipleHypeFromSameUser key;
- Feat: Remove CanBeHyped from the beatmap;
chore: Add example of flag usage for BAT commands;
- Feat: Add LeaderboardType.GlobalIncludesMods for web leaderboard;
fix: Use mods equal check for GlobalWithMods;
- Clear user grades before updating them with RecalculateUserGrades;
- Refactor UpdateScoresSubmittedStatusCommand to work properly with current architecture;
- Add TestHaveUserGradesOnylForUsersBestPersonalBest;
- Feat: Add tests for UpdateBeatmapStatus API method;
fix: Set beatmap set id to beatmaps;
chore: Remove unneeded GetRandomString();
- Feat: Add order ThenByDescending for HypedBeatmaps;
feat: Add tests for GetHypedBeatmapSets API method;
- Feat: Add test cases for GetBeatmapSetEvents API method;
feat: Add test cases for GetBeatmapSetsEvents API method;
- Feat: Add test cases for GetBeatmapSetHypeCounter API method;
feat: Add test cases for HypeBeatmapSet API method;
fix: Remove user in new BeatmapHype object;
- Add test cases for GetInventoryItemCount API method;
- Feat: Add start items to use upon registration;
feat: Add test case to check user has hypes after registration;
- Feat: Add beatmap events;
feat: Add events to database on hype/set status/clear hype;
feat: Add api methods to check beatmap events;
- Feat: Refactor SetBeatmapStatusCommand to use ChangeBeatmapCustomStatus;
feat: Refactor SetBeatmapSetStatusCommand to use ChangeBeatmapCustomStatus;
chore: Don't cache response for beatmapset search;
- Feat: Add endpoint to change beatmap custom status;
feat: Allow empty query for beatmaps search;
chore: Add TODO comments;
- Feat: Rename BeatmapStatusSearch to BeatmapStatusWeb;
feat: Use BeatmapStatusWeb as enum value for CustomBeatmapStatus;
- Feat: Include baeatmp nominator with beatmap;
feat: Add GetInventoryItemCount method for GET "inventory/item" route;
feat: Add GetHypedBeatmapSets method for GET "beatmapset/get-hyped-sets" route;
- Add RefreshUsersHypes recurring job at each start of the week;
- Feat: Add HypeBeatmapSet method for POST `beatmapset/{id:int}/hype`;
feat: Add GetBeatmapSetHypeCounter method for GET `beatmapset/{id:int}/hype`;
- Feat: Add UserInventoryItem db table with UserInventoryItemService;
feat: Add BeatmapHype db table with BeatmapHypeService;
feat: Use ApplyBeatmapHypes on AddCustomBeatmapStatus;
ref: Move CustomBeatmapStatusRepository as CustomBeatmapStatusService of BeatmapRepository;
- Feat: Add tests for GetUserFollowers method;
ref: Remove unneded UpdateUser in tests for GetUserFriends;
- Feat: Add GetFollowers method for `/user/followers` endpoint;
feat: Add tests for GetUserRelationsCounters method;
- Add test cases for getting and editing user metadata endpoints;
- Feat: Add UserRelationship db table;
feat: Add migration to migrate data from old friends user string to UserRelationship and remove friends strings;
feat: Add new GetUserRelationsCounters controller for `{id:int}/friends/count` endpoint;
ref: Implement new UserRelationship instead of user friends string list;
- Feat: Add UserMetadata db table;
feat: Implement API routes to view and edit user metadata;
feat: Remove caching for user controllers;
- Feat: Add DeafultGameMode field to user;
feat: Add EditUserDefaultGameMode API endpoint to allow change users default gamemode;
feat: Include DefaultGameMode in UserResponse;
- Feat: Add isRanked for beatmap and beatmap set;
feat: Use functions to get isScoreable and isRanked;
fix!: Add qualified beatmap status as scoreable;
- Feat: Use ReadStream for API media uploading;
fix: Use real file type in filename when writing file to disk;
- Feat: Use Authorization middleware to get user privilliges;
feat: Use Authentication middleware to get user;
feat: Mark endpoint with requried Authorization as such with extension;
- Feat: Add Bearer security definition for swagger;
chore: Hide models and download button from scalar;
chore: Set CallsPerWindow to 200 for Dev config;
chore: Update Scalar and SwaggerGen packages;
- Feat!: Implement POST beatmapset/{id:int}/favourited to change beatmap favourited status;
feat!: Use `{id:int}/{mode}` and `self/{mode}` routes to get UserWithStatsResponse;
feat!: Use body instead of queries to update users friendship status;
feat: Add missing swagger data for `/leaderboard` endpoint;
fix: Fix some wrong ProducesResponseType types;

ref: CalculateBeatmapPerformance uses GameMode type for gamemode;
- Add SwaggerSchema ReadOnly=true to Category Medals;
- Use StatusGeneric for beatmap set statuses as typed status;
- Implement and use UserBadge enum for user badges;
- Feat: Add QueueLimit to appsettings;
fix: Set QueueLimit to 0 for testing env;
- Feat!: Add Result return type for BeatmapServices methods;
feat: Add retry mechanics for GetBeatmapSet
feat: Send ratelimit message and notification to game session;
- Feat!: Add cancellation token for GET API endpoints;
feat: Add cancellation token for all read database operations;
chore: Silence query messages for entity framework;
- Feat: Add QueueLimit for ratelimiter;
fix: Add second assets domain for is assets request check;
feat: Add more wait time for request timeout and add timeout response;
- Feat: Don't write LeaderboardPosition if not provided;
chore: Remove unneeded optional sign;
- Erich test scores with leaderboard postition;
- Optimize database indexes;
- Add default ordering by Id if pagination is provided without order;
- Feat: Remove database from User and Score API responses;
feat: Include users thumbnails in requests if needed;
feat: Add semaphore lock for db operations on GetUserRanks to allow be runned in parallel;
feat: Add EnrichScoresWithLeaderboardPosition method;
- Feat: Implement QueryModifier in QueryOptions;
feat: Implement IgnoreCountQueryIfExists in QueryOptions;
- Feat: Add totalRestrictions to detailed server status;
feat: Add new query includeRecentUsers which returns both recent registered and online users;
- Dd ability to search beatmap by array of statuses;
- Feat: Add status and more query for beatmap search endpoint;
fix!: Update BeatmapStatusSearch enum values;
- Add /beatmapset/search endpoint
- Add accuracy query for beatmap performance calculator endpoint;
- Feat: Add setbeatmapsetstatus command;
chore: Send websocket message only if new status is not the same as old status
- Add websocket message for CustomBeatmapStatusChanged event;
- Add websocket message for CustomBeatmapStatusChanged event;
- Add docker restart policy for MySQL servers
- Add additional assertions in tests;
- Add message if changed to default status
- Add tests to check the custom beatmap statuses
- Update SetBeatmapStatusCommand;
- Add beatmap extensions;
- Add beatmap status as db entity;
- Feat: Filter restricted users from users friendlist totalCount;
feat: Always provide user status for User API response;
- Add tests for new friends endpoint;
- Add user/friends get API endpoint;
- Add AvatarUrl and BannerUrl for UserResponse;
- Update default banner with more appropriate image
- Feat: Add user/{id}/grades API endpoint;
feat: Add ApiUserGetUserGradesTests;
- Feat: Add recalculateusergrades;
fix: Remove forced maintenance mode for recalculateuserstats command;
ref: Update user grades update upon score submission tests;
- Add tests to check if user grades updates upon score submission
- Update UserGrades upon score submission;
- Feat: Add UserGrades model;
feat: Add UserGradesService;
- Add for MySQL to be healthy before starting tests;
- Feat: Update Sunrise.Tests to use MYSQL database connection;
feat: Create testing MYSQL database in docker-compose.tests.yml;
fix: Parse DateTime from database to ToDatabasePrecision;
- Feat!: Migrate EF database from SQLite to MYSQL;
feat: Add mysql image to docker compose;
feat: Replace Files.DatabaseName with Database.ConnectionString;
- Change pp multipliers for RelaxStandard;
- Add tests;
- Feat: Add pp recalculation for StandardAutopilot;
feat: Add pp recalculation for RelaxCatchTheBeat;
feat: Change pp multipliers for RelaxStandard;
- Adjust Relax PP values;
- Ignore Autopilot for observatory pp calculations
- Provide GameModeExtended and ModsInt in ScoreResponse;
- Enable custom NotStandardMod recalculations;
- Add isStartMaintenance value to RecalculateScoresCommand and RecalculateUserStatsCommand;
- Set Pooling to true for sqlite connection string;
- Submit beatmap retries as failed scores;
- Feat: Don't query database for failed or not scoreable scores;
chore: Remove redundant second check if score with same hash exists;
- Feat: Set "TEXT COLLATE NOCASE" to ignore casing for Username and Email;
test: Add new test cases for negavite and positive cases of wrong casing during Login/Registration
- Block all API requests if server is in maintenance mode;
- Deprecate markscoreasdeleted command;
- Parse ms as seconds for background tasks stopwatch time;
- Move BackgroundTaskService from Database/Services, to Services;
- Don't write multiplayer command on help invoke, if session is not in multiplayer match;
- Disable marking passed scores as deleted;
- Feat: Rename BackgroundTasks to RecurringJobs;
feat: Move BackgroundTask related methods to BackgroundTaskService;
- Feat: Update BackupDatabase method to async overload and cancellationtoken support;
feat: Optimize BackupDatabase method by writing directly to the zip file;
- Add cancellation tokens for recurring jobs;
- Implement some ThrowIfCancellationRequested calls in bg jobs;
- Rename  command deletescore to markscoreasdeleted;
- Implement new backgroundJobs worflow to more dev commands;
- Deprecate ClearDuplicatedScoresCommand;
- Feat: TryStartNewBackgroundJob add optional entry to maintenance;
feat: Update RecalculateScoresCommand to use new BackgroundJobs methods;
- Refactor HttpClientService to return Result object
- Disable custom PP calculations;
- Add custom performance calculations for Relax scores;
- Add more DifficultyAttributes variables;
- Feat: Refactor recalculatescores dev command to work better under workload;
chore: Update default rateLimit value for Observatory
- Add deletescore dev command;
- Small refactoring to include Result in CalculateScorePerformance
- Add /pp endpoint with ability to calculate beatmap performance;
- Update tests to reflect changes;
- Remove BeatmapFile entity;
- Deprecate rosu_pp_ffi;
- Use proper update with performance for beatmap;
- Feat: Add ability to send Http Post requests from Client;
feat: Use Observatory calculator APIs to get performance of score/beatmap;
- Add heat abnormal beatmap hunt medal;
- Submit failed or rejected scores to database
- Feat: Update and unlock recalculate command;
feat: Lock from usage recalculatescores command;
- Use DI for repositories and services inside DatabaseService;
- Add positive test for including personal best scores on the same beatmap in score/top
- Add positive test for reported bug;
- Feat: Use guest session from ip to get ip location;
chore: Remove obsolete SendRequest method;
- Add scalar API docs;
- Feat: Add WebSocketManager;
feat: Send NewScoreSubmitted upon score submission event to all connected web sockets;
- Feat: Update Dockerfile to include other solutions;
fix: Copy rosu_pp libs with Dockerfile;
- Optimize some queries with pagination if needed;
- Feat: Create InGameChatString extensions for beatmap, score and user;
fix: Include gamemode and mods for new first place string;
- Update user stats snapshot entity if not found in db context;
- Simplify database score queries;
- Clear Hangfire jobs for SunriseServerFactory;
- Use new ServerBot privilege to distinguish bot from normal players
- Feat: Move Core folder to new Sunrise.Tests solution;
feat: Use hangfire postrges memory (fucking in-memory keeps disposing in non existance);
feat: Create in memory database for tests;
ref: Refactor core of tests to use new DatabaseService;
feat: Create and store App, Scope and Database in DatabaseTest;
- Add new old type migration for wrongly unlifted restrictions;
- Feat: Add ServerBot UserPrivilege
feat: Add UserStatsRankType;
- Feat: Add SortedSetRangeByRankAsync method to RedisRepository;
feat: Move sorted sets to other redis database;
feat: Add flushOnlyGeneralDatabase option for redis flush method;
- Add ResultUtil;
- Don't include user username in SunriseMetrics;
- Feat(!): Any paging in API is now starts with page 1;
ref: Refactor Sunrise.API to:
- use DI for Controllers,
- use new DatabaseService (EF) for database;
- Add dev flushcache command;
- Feat: Refactor BaseSession to hold UserId, not User, to not have outdated User;
feat: Call User in Session with context if required;
- Split PerformanceCalculator beatmap request logic to CalculatorService;
- Add CreateScope method in ServicesProviderHolder;
- Add Configuration UseRedisAsSecondCachingForDatabase field;
- Feat: Add SunriseDbContext pool on application setup;
feat: Add EF Second level cache (redis);
feat: Apply migrations and seeding on application setup;
- Feat: Refactor database services to use EF SunshineDbContext;
feat: Add EF Initial migrations;
feat: Add EF database seeders;
- Update db Models to use EF attributes;
- Add old type of migrations, to support migration from WatsonORM to EF
- Feat: Add UserService for user logic via client logic;
ref: Make Sunrise.Server services non-static, use DI;
- Add more checks for possible null values;
- Feat: Move register logic to UserAuthService, use it for both Server and API;
test: Update register endpoint tests to reflect changes;
- Feat: Split API and Shared logic to different solutions from Server;
ref: Naming conventions refactoring;
---
Test can be broken, due to them again sharing somehow environment
- Add reloadconfig command
- Add announce command
- Feat: Ignore restricted users in user/search;
fix: Remove unneded in the search api score tests;
test: Add TestSearchUserIgnoreRestrictedUsers;
- Add development file checks to throw error if trying to modify/delete production data;
- Feat: Add more if checks for user/id/scores
test: Add ApiUserGetUserScoresTests.cs;
- Add null checks for Beatmap is mostplayed; feat: Add null check for user in leaderboard;
- Feat: Don't include restricted users in leaderboard;
test: Add TestLeaderboardWithoutRestrictedUsers;
- Feat: Add IsRestricted user checks for some user requested APIs;
ref: Move from ApiUserEditFriendStatusTests Get methods to new class;
test: Add FriendStatusForRestrictedUser test both for get and edit;
- Feat: Change valid username regex;
feat(!): Disallow russian nicknames;
- Feat: Don't dispose Hangfire InMemoryStorage, but clear it instead;
chore: Update Hangfire.AspNetCore version;
- Feat(!): Create in-memory hangfire if server not provided or disabled;
ref: Use BackgroundJobs as alternative to Task.Runs (safer, more stable for tests);
fix: Disable recalculate command due to being unstable;
chore: Add async overload for CalculatePerformancePoints; chore: Use BaseSession for Calculate methods;
- Feat: Add Form checks for banner/avatar upload API;
test: Add ApiUserAvatarUploadTests.cs;
test: Add ApiUserBannerUploadTests.cs;
- Feat: Update IsValidUsername to return error if username is invalid;
test: Add more invalid usernames to test;
- Add PasswordExtension with IsValidPassword method;
- Add length check for IsValidUsername method;
- Feat: Don't return user graph for restricted users;
fix: Don't remove snapshot with save date, since it can be used for users with different timezone;
chore: Add query checks for user/graph;
- Return null for GetUserStats if user doesnt exist;
- For all DataTime Json response objects add UTC+0;
- Don't return user from API if he is restricted;
- Feat: Add ignoreRestriction argument for IsActive method in User;
fix: Don't allow take usernames of restricted players;
- Add EnrichWithBeatmapData
- Add minInt for GetRandomInteger;
- Add useRedis for ApiTest
- Feat: Add ModelState checks for all api/beatmap endpoints;
fix: If Mods.None was provided in beatmap/leaderboard, count it as GlobalWithMods;
- Copy rosu_pp_ffi.so in Sunrise.Server.Tests.csproj
- Move copy command of linux build for rosu_pp_ffi, to Sunrise.Server.csproj
- Add ScoreServiceSubmitScoreTests;
- Add UserStatsExtensionsTests;
- Add more invalid mods for IsHasInvalidMods;
- Create BaseTest.cs;
- Add ReplayService for Tests;
- Add ability to init ReplayFile from replay;
- Add EnvironmentVariableManager;
- Add test Extensions;
- Feat(!): Add Moderation field in appsettings config;
feat: Add BannablePPThreshold field in config;
- Split MockUtil to MockServices;
- Feat: Add ability to reload Configuration;
feat: Add Environment variables to Configuration;
- Include rosu dll in test builds;
- Add ApiScoreGetScoreTopTests;
- Feat: Add ApiScoreGetScoreReplayTests;
feat: Add ApiScoreGetScoreTests;
feat: Add CreateTestScore for DatabaseTest;
chore: Add JsonConstructor for ScoreResponse and UserResponse;
- Return inserted after insert;
- Feat: On score fetch, if owner is restricted, don't show score;
fix: If score owner is not found while fetching scores score/top, ignore score;
chore: Add more checks for query parametrs of score/top
- Add ApiBaseLimitsTests;
- Feat: Add ImageToolsTests;
feat: Update FileMockUtils to recursively search for all files;
chore: Update and sort test resources by folders;
- Feat: Add unit tests (CharactersFilterTests, ImageToolsTests);
feat: Add Resources folder for tests;
feat: Add FileMockUtil to get resources;
- Add more test cases for AuthControllerTests.cs
- Update dotnet.yml
- Add TestStatusDetailedReturnsValidInfo
- Feat: Create DatabaseTest for tests with usage of database;
feat: Create ApiTest for tests with usage of api;
feat: Drop all tables in db for each test;
chore: Don't recreate all Data folder for each test, just Files content;
- Feat(!): Add Sunrise.Server.Tests;
feat: Add simple tests for API Auth/Base;
feat: Add simple tests for Server Controllers (Assets/Bacnho);
chore: Add docker-compose.tests.yml;
chore: Add appsettings.Tests.json;
chore: Update Sunrise.sln to include Sunrise.Server.Tests;
- Add WarmUpSingletones in Boostrap;
- Feat: Add UseHangfire option to Configuration;
chore: Add ability to disable background jobs;
- Feat: Update docker container to reflect project being moved to Sunrise.Server;
chore: Update docker compose containers to have unless-stopped restart policy;
- Feat: Use IsUsernameDisallowed upon IsValidUsername usage;
chore: Remove "./Data" prefix from Paths in database;
- Feat: Move Server to Sunrise.Server;
chore: Update Sunrise.Server project file;
- Feat: Add username admin command;
feat: Add cooldown for changing the nickname;
fix: Don't let get usernames of active players;
fix: Doesnt create update username event two times;
- Add disabling inactive accounts
- Add username change endpoint;
- Add filtering of special words in username
- Feat: Enhance login event to be user events;
feat: Create register events;
feat: Create password change events;
- Add deleteuser command;
- Add AccountStatus field for user table;
- Add limit and page attr for user search
- Feat: Write restriction reason on request;
feat: Allow api requests for api requests;
- Add recalculatescores command;
- Ingnore Relax for PP calculations, for better pp values;
- Feat: Sort leadeboards for game modes without score multiplier by PP;
fix: Autorestrict by pp only in standard gamemodes;
- Feat: Try to fetch score with same hash from db on score submit, decline if we already have that score in db;
feat: Add new SubmissionStatus for invalid scores;
fix: Add new dev command to clean up duplicates from DB;
- Add BackupDatabaseCommand;
- Add SaveStatsSnapshotCommand;
- Add new dev command "appendnewuserstats";
- Feat: Create custom GameMode enum with Relax,Autopilot,ScoreV2 modes;
feat: Change all osu GameMode type to our local;
feat: Update code who relied on GameMode type to the changes;
feat: Remove for-loops with GameMode logic which was hard-coded to only standard modes;
feat: Create new user stats if user exists in database, but user stats for X gamemode don't;
feat: For submitting score disallow scores with non-standard but not supported mods;
feat: Transform GameMode of submitted score's to the new format;
feat: On getting scores for the beatmap, check if user tries to fetch scores for the non-standard mod (e.g. Relax);
- Add "UseCustomBackgrounds" option, which on false redirects to osu current seasonal backgrounds;
- Feat: Better log if checksums on score submission is invalid;
chore: Move pp ban value from 2k to 2.5k pp
- Auto-restrict by PP
- Add more information to beatmapset API
- Add passhash hash claim for user's API token
- Debugged ResetPass controller
- Added passress controller
- Ignore grafana folder
- Add dummy response
- Feat: Add LocalProperties for UserStats;
feat: Add UserStatsExtensions;
- Add dev command for best combo recalculation
- Feat!: Rewrite ScoreService.cs in Database for better readability;
feat: Init SubmissionStatus field for score;
feat!: Use SubmissionStatus field to decide user's PB score;
- Feat: Add extensions;
feat: Add LocalScore;
chore: Remove ScoreHelper in favor ScoreExtensions;
- Feat: Dont save duplicated beatmapsets for different pointers, make pointers point to set_id;
chore: Move redis logic to BeatmapManager
- Check for IsRestricted and set pp to 0 if user isRestricted
- Replace banner/avatar file if found
- Don't freak out if can't find beatmap
- Simplify osu direct search requests;
- Serialize empty queries before sending API's request
- Feat: Change all API's to Observatory one's;
feat: Add fields to beatmap and beatmapset serializable objects;
- Add Observatory usage
- Feat: Add BeatmapStatus on score;
feat: Add /updatescoresbeatmapstatus dev command for updating BeatmapStatus on scores;
feat: Fix loved maps being treated as ranked
- Update mirror endpoints to site endpoints
- Add user object to API score
- Expose status field for beatmap API object
- Add submitted_date field to beatmap set

#### <!-- 1 -->üêõ Bug Fixes

- Use port 80 for dummy observatory for testing + minor fixes
- Hangfire allow user variables
- Add http protocol for both loki and tempo uri
- Env in workflow
- Downgrade Microsoft.AspNetCore.OpenApi to our .net version
- Ignore beatmapSetsByBeatmapIdsResult failure if
- Lock dbSemaphore while checking redis, since we after if hit can go into db.
- Use SHA1 to get avatar/banner hash
- Tests
- Lock postgres version to 17
- Take in consideration while fetching beatmap scores that they should be scoreable and passed
- Use all user scores, not only the best leaderboard user scores to GetUserPersonalBestScores;
- Tests
- Use prevUserPersonalBestScoresWithSameMods to update submission status for prev pb;
- Handle HttpStatusCode.NotFound properly in ActionErrorResult;
- Throw error on ActionErrorResultto be handled with ProblemDetailsExceptionHandler;
- Show ChangeUsernameOnCooldown error if cant change username;
- Tests
- Adding a check for event data.
- Fixing a wrong string to check.
- Fixing Greece IP.
- Add user's id and ip to parameters on updating their country in a database.
- Correct typo in error message.
- Write CountryChangeCooldownInDays as numbers in json configs;
- Remove false negative test case;
- Update ApiIserCountryChangeTest to properly mock user data and enhance checks;
- Delete previous user ranks from redis upon country change;
- Fix: Make Spectators as Dictionary as Array;
fix: Clear Spectating session before joining another spectate;
chore: Add TODO for spectators;
- Make UserStats unique for edge cases;
- Dont create backup if MaxDailyBackupCount set to 0
- Count for a restriction reason length all lines, and not just the first word
- Include user meta files when including beatmap event executor;
- Use ActionErrorResult to handle bad results in UpdateBeatmapStatus;
- Fix: Use another GetBeatmapScores to get databaseScoresWithSameMods;
feat: Add test to check if score submission fetches both normal and modded personal best;
- Fix compilation error for tests;
- Add down migration for FixAllBadBestValuesForUserStats;
- Reverse all .IgnoreCountQueryIfExists statements to return Count values if options is missing;
- Update user friends related test;
- Fix!: Revert removing optional to user's ranks;
feat: Add migrations to fix broken best values in user stats;
- Add additional sorting by last score and user Id for GetUsersStats;
- Remove mock of IsScoreable values;
- Use Configuration.SystemTextJsonOptions for Deserialize of UserStatsResponse in tests;
- Use default serialization config for UserWithStatsResponse;
- Cache beatmapset in GetBeatmapSet;
- Fail requests if cant find valid user for authorized endpoint;
- Use ReadStream for files in tests;
- Fix: Apply app config for TestGetBeatmapWithCustomStatus json deserialization;
fix: Use post for beatmap update favourited status tests;
- Fix: Apply json converters options for a Bootstrap
fix: Change BeatmapStatus to BeatmapStatusSearch type for beatmap tests;
- If cant get beatmapset write Unknown in replay filename;
- Fix!: Use selfUser for multi invite sender;
fix!: Properly parse usernames form multiplayer commands;
chore: Add backup_mysql to gitignore;
- Add Json parsing for StatusResponse;
- Remove database from user responses in tests;
- Fix: Check if expression has OrderBy to be precise;
fix: Enrich scores with leaderboard postions using RANK();
- Allow accuracy as float for pp calculations;
- Fix: Use nullish for id of BeatmapSetGenre and BeatmapSetLanguage;
fix: Subtract one from page number before requesting
- Use bitwise AND to filter beatmap scores by mods;
- Update user accuracy and performance even if his account is disabled;
- Fix CalculateStreamsNerf using pp values instead of beatmap values;
- Use Id to find beatmap to update beatmap status;
- UpdateBeatmapRanking even if we have no custom rankding to not ignore if all ranking is disabled;
- Doesn't update cache directly with custom beatmap status;
- Fix: Friends tests should always include authed user;
fix: Parse random user as UserResponse object;
chore: Set response cache of user/friends to 0;
- Sort LeaderboardSortType.Score by RankedScore;
- Add missing DatabaseService injection for UserResponses in tests;
- Update index of UserGrades to include gamemode;
- Use RemoveSession if registered from another location;
- Add async overload for SoftRemoveSession;
- Set"SslMode=Required;";
- Don't run database migration if env is testing;
- Remove backupDatabaseFile after backup;
- Update Sunrise.Shared Configuration to include DatabaseConnectionString;
- Apply osu std relax custom recalculations only to Standard
- Apply osu std relax custom recalculations only to RelaxStandard
- Trim OsuVersion from score, blame osu client;
- Use default mode value for ActiveMods if freeMods is active;
- For redis Flush, add return for general database flush;
- Set performance points to 0 if can't calculate for some reason;
- Fix: Update accuracy formula for taiko and mania v2;
test: Add tests for CalculateAccuracy;
- Parse CompactUser Id as nullable
- Render perfect shorted mod as just PF
- Combine deafult medal path with DataPath
- Ignore capitalization for user search by query
- Use top100Scores.Count for any bonus value calculation;
- Cant use paging, since it maybe will not retrieve user's personal best
- Send spectator user Id, not the streamer user id
- Get not beatmaps best scores, but users personal best scores;
- Filter scores by gamemode before selecting beatmaps best scores;
- Handle new Result return type in GetUserAuthTokens
- Ignore relax for beatmap with mods calculation;
- Filter GetScreenshot by Screenshot file type
- Use base.Dispose after clearing old hangfire jobs;
- Fix: Show only ranked or approved beatmap scores in /topplays;
test: Add TestGetIgnoreNonRankedTopScore;
- Fix(tests): Use new paging options in paging test cases;
fix(tests): Update tests with scores soring, to use corrent WhenPlayed sort by results;
fix(tests): Change some final error message expectations;
feat(tests): Add TestSuccessfulUnlockMedalAfterScoreSubmission;
feat(test): Update TestUserIgnoreRestrictionByPpThresholdIfNotVanillaGamemodeUponSubmitScore from Fact to Theory;
- Create scope of scopeService for tests;
- Actually remove old hangfire jobs;
- Mock WhenPlayed score data for TestGetUserScoresWithLimitAndPage;
- Set BeatmapsetId from beatmapSet.Id;
- Remove unneeded check before login;
- Add IClassFixture for DatabaseFixture
- Rename some wrong names in UserController;
- Check expectedError for change username error;
- Use UsernameChangeRequest body for invalid requests
- Convert Score.TotalScore to int while reading Replay;
- Fix: Check if Authorization token is Bearer;
fix: Don't parse Session from tokens if user is restricted;
- Include mode for leaderboard in TestGetBeatmapLeaderboardNotFound;
- Use IClassFixture<DatabaseFixture> for DatabaseTest
- Fix: Convert gamemode to vanilla while checking gamemode to increateTotalHits on UpdateWithScore;
fix: change getter for UserId from score to userStats;
chore: Add comment;
- Normalize random Scoreable score;
- Extend from EnvironmentFixture in DatabaseFixture
- Use pointer to call Configuration attributes;
- Fix: Add missing files to DataTest;
fix: Remove WIP changes;
- Use ApiTest abstraction for AuthControllerTests
- Fix: If userId is not found for RefreshToken (invalid token) return null;
chore: Add JsonConstructor method for ErrorResponse;
- Fix: Use HighRes image of default medal if needed;
chore: Remove "./Data" prefix from Paths in database;
- Update database types for long number to use BIGINT type;
- Support "is playing" action as beatmap command;
- Include non active users, since they are still shown in leaderbaord;
- Provide restricted badge for restricted accounts;
- Upon upsert remove the old score from the new array, not the original;
- Move updating stats logic on restriction status change to the functions itself;
- Restrict only on ranked beatmaps.
- Get user id from just inserted user upon registration;
- Don't allow duplicates in the db;
- Make backupdatabse command use BackupDatabase Task.Run to not block the main thread;
- Remove unneeded Console.Log
- Remove oldest stats snapshot, not the newest
- Can't submit standard scores due to IsSingleMod() returning false;
- Return vanilla game mode in scores;
- GetBestScoresByGameMode getting only by beatmap best, should be users best
- Add Command suffix to appendnewuserstats
- Fix: Use Relax2 enum for autopilot, not autoplay;
fix: For ModsShorted use AP for autopilot and AT for autoplay;
- Fetch LocalProperties for new Score on creation
- Should finally fix Redis being helpless while decoding a json with score and etc;
- Don't check osu! version for score submission, since it doesn't include "cuttingedge" and other suffixes;
- Ignore LocalProperties for jsoning
- Database update fix in user_file table
- IncludeFields for Redis Json deserialization
- Fix: Make cache for AllUsers much safer by resetting it on any user update;
fix: Don't include restricted users in total users for API
- Show "NC" as short mod for Nightcore
- Private redis from Database.cs
- Fix: Don't show scores from same player on same beatmap twice in /top;
fix: Get scores by TotalScore
- Update max combo on loved beatmaps
- If user rejoins server without sending leave packet, make soft remove of prevois session, to clear multi rooms, etc.
- Multiplayer can't be started if in progress, while nobody is playing
- Parse BannedIps from config
- If JSON DateTime provided as string of numbers, parse it;
- Ignore serializing of queries if no queries provided
- If beatmap is non-scorable, don't show scores
- Skill medals condition should focus only on current difiiculty rating and not lower.
- Temporaly disable recalculation for star ratings
- Fix seasonal background being broken
- Fix: treating json timestamps in ms as seconds;
feat: expose user_id for beatmap and beatmapSet
- Fix: mino api had dates as unix, should transform to DateTime
fix: two methods for same route
- Make /user/id/mostplayed show count how much was played
- Set long cache for beatmaps to have sane user api limits
- Fix: Beatmapset routes looks with beatmap id;
JSONed not found or unauthorized responses
- Private messages not being sent
- Weighted PP being calculated with scores sorted by ranked score, should be sorted by pp
- On getting user with username and password and with or without will have two different redis keys
- Don't make PP or any ranked calculations if not ranked or approved
- Convert FileType enum to int for db search

#### <!-- 10 -->‚óÄÔ∏è Revert

- Feat: Disable marking passed scores as deleted;
- Fix: Add IClassFixture for DatabaseFixture

#### <!-- 11 -->üîÄ Merge Commits

- [chore] Merge Branch 'master' into feat/users-best-scores-calculated-by-pp-instead-of-score
- [chore] Merge Branch 'feat/beatmap-nomination-system' of https://github.com/ohaui/Sunrise into feat/beatmap-nomination-system
- [chore] Merge Branch 'master' into feat/beatmap-nomination-system
- [chore] Merge Branch 'master' of https://github.com/ohaui/Sunrise
- [chore] Merge Branch 'master' into feat/add-more-supported-gamemodes
- [chore] Merge Branch 'healthy-refactor' into chore-Get-healthy-refactor-up-to-date-resolved-conflicts
- [chore] Merge Branch 'master' of https://github.com/SunriseCommunity/Sunrise

#### <!-- 12 -->üõ†Ô∏è GitHub Actions

- Create dotnet.yml

#### <!-- 13 -->üíº Other

- Merge pull request #91 from SunriseCommunity/chore/throttle-api-ratelimit-warning
- Merge pull request #89 from SunriseCommunity/fix/omit-not-found-beatmapsets-from-search-with-custom-status
- Merge pull request #88 from SunriseCommunity/feat/search-only-beatmaps-with-custom-ranking
- Merge pull request #87 from SunriseCommunity/feat/admin-panel-edit-user
- Refactor UserEventService to reuse AddUserEvent private method
- Merge pull request #85 from SunriseCommunity/feat/optimise-test-framework
- Don't use hangfire server for testing
- Merge pull request #84 from SunriseCommunity/fix/new-performance-calculations-fixes
- Merge pull request #83 from SunriseCommunity/feat/users-best-scores-calculated-by-pp-instead-of-score
- Update PULL_REQUEST_TEMPLATE.md
- Merge pull request #82 from SunriseCommunity/feat/show-pp-over-client-limit-as-ranked-score
- Merge pull request #80 from SunriseCommunity/feat/add-ability-to-hide-user-previous-username
- Merge pull request #79 from SunriseCommunity/feat/show-last-usernames
- Merge pull request #78 from SunriseCommunity/feat/use-objects-for-error-codes-instead-of-plain-text
- Update README.md
- Merge pull request #76 from SunriseCommunity/feat/country-change-api-endpoint

Add API endpoint to change country code.
- Moving EventData class to Sunrise.Shared
- Merge remote-tracking branch 'origin/feat/country-change-api-endpoint' into feat/country-change-api-endpoint
- Use CountryCode enum instead of short in `Country` property inside the User class.
- Update README.md
- Merge pull request #75 from SunriseCommunity/feat/websocket-improvements
- Update README.md
- Update README.md
- Update README.md
- Merge pull request #73 from SunriseCommunity/fix/bot-mod-inclusion-while-playing
- Update Sunrise.Server/Repositories/ChatCommandRepository.cs

else if stuff seems fine to me but it is up to you

Co-authored-by: richardscull <106016833+richardscull@users.noreply.github.com>
- ;3
- Here‚Äôs a well-structured commit message for your changes:

include mods in /np to SunshineBot to calculate pp.

- Fixed mods not being included in /np action while playing.
- Refactored hardcoded action strings into a new object with constants.
- Update register flow;
- Merge pull request #72 from SunriseCommunity/feat/general-improvements
- Merge pull request #71 from SunriseCommunity/feat/beatmap-nomination-system
- Merge pull request #70 from SunriseCommunity/fix/score-submission-related
- Merge pull request #69 from SunriseCommunity/feat/user-metadata
- Merge pull request #68 from SunriseCommunity/feat/add-default-user-gamemode
- Merge pull request #67 from SunriseCommunity/feat/beatmap-statuses-improvements
- Merge pull request #66 from SunriseCommunity/feat/openapi-changes-with-api-related-changes
- Ref: Add IgnoreCountQueryIfExists for queries who are not using count;
ref: Use IncludeUserThumbnails for getting users on `/status` endpoint;
fix: Send proper `total_count` value for `/score/top`;
feat: Add IncludeUserStats and IncludeUserStatsSnapshots extension methods;
feat: Merge GetUserFavouriteBeatmapIdsCount into GetUserFavouriteBeatmapIds;
chore: Remove dead code;
feat: Include users for beatmap leaderboard, instead of requesting each one for each score;
- Add using overload for db connection of EnrichScoresWithLeaderboardPosition
- Don't track media db records while getting image bytes;
- Remove optional to user's ranks;
- Change JsonRequired to c# required property;
- Merge pull request #65 from SunriseCommunity/feat/db-query-optimization

General optimizations and refactoring
- Update README.md
- Update README.md
- Merge pull request #64 from SunriseCommunity/feat/search-beatmapsets-api

Add beatmapsets search endpoint
- Merge pull request #63 from SunriseCommunity/feat/custom-beatmap-status

Feat/custom beatmap status
- Add scoped server to CustomBeatmapStatusRepository;
- Merge pull request #62 from SunriseCommunity/feat/add-api-friends-list

Add API friends list
- Merge pull request #61 from SunriseCommunity/feat/userfiles-related-changes

Small enhancements for user avatar/banners
- Merge pull request #60 from SunriseCommunity/feat/add-user-grades

Add user grades
- Log creating user grades as information;
- Remove deprecated SQLite usages;
- Merge pull request #59 from SunriseCommunity/feat/migrate-database-to-mysql

Migrate database to MySQL
- Merge pull request #58 from SunriseCommunity/fix/pp-custom-calculations

Update pp custom calculations
- Merge pull request #57 from SunriseCommunity/feat/implement-2025-03-06-pp-rework

Enable not standard mod recalculations
- Merge pull request #55 from SunriseCommunity/fix/minor-fixes-patch-1

Minor fixes
- Create PULL_REQUEST_TEMPLATE.md
- Merge pull request #53 from SunriseCommunity/feat/use-observatory-pp-calculator

Use Observatory API for performance calculations
- Add cancellation token workflow for BG jobs

feat: Add canceljob dev command;
feat: Add generic method ExecuteBackgroundTask;
feat: Add generic method TryStartNewBackgroundJob;
- Update RecalculateUserStats command;
- Merge pull request #52 from SunriseCommunity/fix/wrong-bonus-values

Fix: Wrong bonus value calculation
- Merge pull request #51 from SunriseCommunity/fix/use-di-for-database

Fix: use DI for DatabaseServices repositories
- Use using for logger
- Merge pull request #50 from SunriseCommunity/fix/best-scores-filter-beatmaps-best-with-all-modes

Fix `score/top` ignores some best scores
- Merge pull request #48 from SunriseCommunity/feat/add-websocket

Add websockets support (+Scalar API Docs)
- Ref: Refactor RequestsHelper to HttpClientService
ref: Refactor AuthService to use Results
- Merge pull request #47 from SunriseCommunity/feat/rewrite-to-entity-framework

Changing ORM to Entity framework and updating files structure (once again üôÑ)
- Small refactoring;
- Ref: Refactor Sunrise.Shared extensions to use new EF and session changes;
feat: Add IsScoreable BeatmapStatusExtensions Extension;
feat: Add GetGameModesWithoutScoreMultiplier GameModeExtensions Extensions;
chore: Move IsVanillaGameMode from SubmitScoreHelper;
- Refactor Sunrise.Shared repositories to use new EF and session changes;
- Refactor common shared objects to new EF and session changes;
- Refactor BeatmapRepository to BeatmapService (Shared);
- Refactor Sunrise.Server controllers to use new EF and session changes;
- Ref: Refactor ScoreService and SubmitScoreHelper to use new EF and session changes;
ref: Move unlockAndGetMedals from GetScoreSubmitResponse to before the method usage;
- Refactor Sunrise.Server services to use new EF and session systems and DI;
- Refactor BeatmapService to DirectService with usage of BeatmapService (from Sunrise.Shared);
- Ref: Move MedalHelper to MedalService;
fix: Allow achieving medals on approved or loved beatmaps;
- Refactor both ChatCommand and PacketHandler repositories for ef and session changes;
- Refactor Packets to use new dbContext (with paging) and session.UserId;
- Refactor ChatCommands to use new dbContext (with paging) and session.UserId;
- Refactor BackgroundTasks to use dbContext with paging;
- Ref: Rename RegionHelper to RegionService;
ref: Make GetRegion of RegionHelper non-static;
feat: Cache locations from ip;
- Get restrictedUserIds and add them as Expression in queries where users should not be restricted;
- Merge pull request #46 from SunriseCommunity/feat/more-dev-commands

Add more dev commands
- Merge pull request #45 from SunriseCommunity/feat/automated-tests

Add automated testing üïµÔ∏è
- Revert "ref: Move clearing hangfire logic;"

This reverts commit 435efc5d4ce5b4a9eac4a8824a2cde629eaf1ea6.
- Ref: Move clearing hangfire logic;
feat: Wait for all processing jobs to stop before deletign them;
- Check if query is provided before checking ModelState for user/search;
- Ref(!): Rename FriendStatus json responses;
test: Add ApiUserEditFriendStatusTests Get tests;
- Change password change API path from "password/reset" to "password/change"
- Ref: Update GetRandomBeatmapSet;
feat: Add GetRandomBeatmap;
- Get Betmap and BeatmapSet Status with GetValueOrDefault
- Ref: Rename UpdateLeaderboardPositions to EnrichWithLeaderboardPositions;
ref: Use this for UpdateSubmissionStatus;
- Rename newer migration file to reflect rebased addition of new migration file;
- Testing;
- Temporally disable cleaning datapath/files
- Temporally disable cleaning datapath
- Ref(!): Change BannedUsernamesPath to BannedUsernamesName;
feat: Make DataPath and DatabaseName changable in Confifuration
chore: Remove "./Data" prefix from Paths in database;
- Merge pull request #42 from SunriseCommunity/feat/user-account-deprecation

User account deprecation and improved moderation
- Queue dev tasks with Task.Run function
- Merge pull request #40 from SunriseCommunity/fix-on-upsert-score-updates-original-list

Fix editing the original array of scores upon upserting
- Update README.md
- Merge pull request #35 from SunriseCommunity/feat/add-more-supported-gamemodes

Add more supported gamemodes (e.g. Relax, Autopilot, ScoreV2)
- Merge pull request #32 from asdofen/db-update-correction

fix: Database update fix in user_file table
- Update Data/Migrations/000014_user_file_improvement.sql

Co-authored-by: ItsRichardscull <106016833+richardscull@users.noreply.github.com>
- Merge pull request #31 from asdofen/password-reset-controller

Password reset controller
- Merge pull request #30 from SunriseCommunity/feat/add-osu-getbeatmapinfo-endpoint

Feat: Add "web/osu-getbeatmapinfo.php" endpoint.
- Merge pull request #29 from SunriseCommunity/healthy-refactor

Healthy refactor [Bug fixes, extensions, submission status]
- Merge pull request #28 from SunriseCommunity/chore-Get-healthy-refactor-up-to-date-resolved-conflicts

chore: Get healthy-refactor up-to-date
- Merge pull request #27 from SunriseCommunity/revert-26-revert-25-healthy-refactor

Revert "Revert "Healthy refactor""
- Revert "Revert "Healthy refactor""
- Merge pull request #26 from SunriseCommunity/revert-25-healthy-refactor

Revert "Healthy refactor"
- Revert "Healthy refactor"
- Merge pull request #25 from SunriseCommunity/healthy-refactor

Healthy refactor
- Merge pull request #24 from SunriseCommunity/add-beatmap-manager

Add Observatory as our beatmap manager
- Recalculte beatmap diff if has other mode
- Add leaderboard endpoint for beatmap
- Fix redis not parsing dateTime correctly
- Add Mino api
- Merge pull request #23 from SunriseCommunity/user-description

Add description field to user and add API route to edit it
- Add description field to user and add API route to edit it
- Merge pull request #22 from SunriseCommunity/scores-changes

Scores changes
- Add global top scores API
- Add /mostplayed API route for user
- Save failed replays for total plays, but don't show when in leaderboard
- Change hangfire middleware once again and im not happy
- Merge pull request #21 from SunriseCommunity/beatmap-favorite

Add beatmap(sets) favourites
- Add API user favourites routes
- Add favourites with in game routes for it
- Fix LastOnlineTime not updating in db;
- Small changes to hanfire dashboard and data folder in backups
- Add registration API
- Add redirect for user profile
- Use middleware before hangfireDashboard
- Hangfire open dashboard for Docker;
Change hangfire cron timings
- Update README.md
- Update README.md
- Update EventBanner.png
- Add login events
- Add user/search endpoint to look up for user;
Add detailed query to status to get more information
- Add redirect for changing user avatar
- Unlogin user, if logged in from new client;
Update LastOnlineTime on disconnect
- Add IsRanked to scores to understand if user can have pp from unranked scores
- Add reversed time in sorted set so score would be in desc order but if we have duplicate of score we would select by time in asc order;
Save pp values with floating point;
- Add ClearCacheOnStartup in conf;
Sort stats by pp for setting up best place if is null in db
- Deprecate old graph endpoint;
Fix while getting snapshots from redis, couldn't set json because it had private set;
Small changes to graph endpoint
- Fix .example production json
- Fix .example production json
- Fix Configuration tries to get API Secret token from wrong value key
- Merge pull request #20 from SunriseCommunity/Additions-to-osu-server

Additions to server [Medals, snapshots, migrations, fixes]
- Add API route for new stats snapshots
- Mor up-to-date cache on API
- Add stats snapshots to db;
Create bg job to save daily snapshots of users stats
- Database schema improvements
- Fix accuracy being saved without floating point;
Fix while submitting score doesnt doing recalculation of beatmap star-rating if has mods etc.
Fix recalculate beatmap star-rating and print gamemode for in game commands
- Add new leaderboard fields to API response;
Change "play_time_ms" to just "play_time"
- Add country leaderboard and user personal best rank
- Better migration files
- Add background tasks using Hangfire;
Add bg task to backup db files in zip.
Move some classes from Utils to Application folder
- Add API routes to check user medals
- Add UseCache boolean to Config
- Clear redis cache up on migration
- Url fix on first place message
- Add TotalHits to user stats, add medals who rely on TotalHits condition
- Sort migration in asc before applying each
- Add db migrations and osu achievements (medals)
- Fix setting multiple redis keys doesn't have TTL
- Merge pull request #19 from SunriseCommunity/flexible-setup

Better server config
- Clean up
- Add .example file for Production json
- Stop tracking appsettings.Production.json
- Move config to appsettings.{env}.json
- Merge pull request #18 from SunriseCommunity/api-enhancement

API Enhancement
- Vary cache by Authorization header
- Update all command, now named as leaderbaord and has pagination
- More read-safe getters in db
- Write beatmap set id with score
- Add more fields for API beatmap object
- Add API friendship/follow routes
- Error if no headers while looking for token
- Add caching header to some API routes
- Add beatmaps API route
- Add GenerateIpSession for APIs
- Send mods as shorted string for scores
- Add LastOnlineTime to User; Change scores API routes
- Write beatmap set id with score
- Merge pull request #17 from SunriseCommunity/qol-fixes-and-changes

QOL changes + Fixes
- Better image resizing
- Add global rank to user stats API response
- Add user status/badges and ability to not fall back to default banner/avatar through API
- Add recalculate command
- Db class related changes to prev commits
- Add UserPrivileges, use it as overhaul for PlayerRank
- Change default height for banners
- Better naming for token request
- Return error for API as json
- Time for token being calculated with time+nowUtc
- Add /status API endpoint for website
- Clear packet for joining chat channel
- Merge pull request #16 from SunriseCommunity/docker-support

Add docker support
- Add docker support
- Fix bad Rijindael parsing;
Compute online score hash and check it from provided score;
Add some metrics;
- Optimize rosu dll
- Fix LastFmFlags naming
- Merge pull request #15 from SunriseCommunity/ref/qol-revision

Add proper API logic + QoL revision
- Add json wrapper for User and UserStats;
Add API endpoins for get All (without pagination for now);
- API change from cookie to auth header;
Small fixes;
- Add Jwt packet
- Update Database path for using params
- Rework restriction system;
Add lastfm restrictions;
- Add API (WIP):
- Controllers,
- Services,
- Auth token system,
- Beatmap ratelimits shared per account
- Second batch of score changes
- Add BaseSession for future API usage;
Changes to UserAttributes;
Clean up;
Catch if got error during beatmap request
- First banch of beatmap related changes
- Rename /Storage to /Storages
- Remove useless Console.WriteLine line
- Move some objects from /Objects to seperate folder
- Update Assets method to be all async;
Add another peppy
- Move Second as private const
- Remove unused "shell" requests
- Add GetRequiredServices method for ServicesProviderHolder to not access ServiceProvider to get service
- Update Database.cs to reflect on prev. changes
- Update UserAttributes to have UpdateLastPing method.
- Clean up
- Update from BeatmapService to BeatmapManager where needed
- Add new TryGetSession method;
Update other GetSession usages
- Refactor controllers (split some logic);
Refactor services (some methods moved to Managers or Helpers);
Add Storage folder for try/catch operations;
Add new metric for errors;
Add Peppy?;
- Update README.md
- Merge pull request #14 from SunriseCommunity/feat/multiplayer

Add Multiplayer with !mp commands;
- Add ImageSharp lib to .csproj
- Add user query value to check-updates.php
- Resize image and check Image extension by bytes;
Some db related changes to lst commit;
Handle bot in as db user entity;
- Move ExternalApis from db to local List by @ohaui request.
Small style changes
- Better log message for ThrowIfHasEmptyFields methods
- Add temporary redirect to osu.direct for beatmaps info
- Update beatmap related chat commands
- Update README.md
- Add !mp mods and map command
- Move RedisKey type
- Add multi clearhost command
- Add more timer commands;
Change logic of timer command for multi
- Add bot response on multi invite
- Add even more !mp commands
- Add basic !mp commands
- Fixes and enhances for multiplayer
- Refactor implementation of "abstract" channels
- Add ratelimit on invite message
- Add auto-join to multiplayer channel
- Multiplayer.
- Small changes and fixes. Not really realted.
- Mods now have free supporter
- Write user silence time in db on anti-spam action
- Small fixes and tweaks
- Osu direct show most played maps from local db
- Add rate limit for chat messages
- Merge pull request #13 from SunriseCommunity/feat/upload-screenshot

Screenshot upload
- Add screenshot upload and viewing logic
- Clean up
- Fix download beatmapset endpoint
- Merge pull request #12 from SunriseCommunity/feat/spectate

Add spectating
- Add spectator channel
- Update README.md
- Handle spectating packets
- Add osu-search-set endpoint;
Redirect to osu.ppy.sh for current osu version
- Merge pull request #11 from SunriseCommunity/feat/osu-direct

Add osu!Direct
- Refactor for osu!Direct service
- Clean up controllers
- Remove fetchUser to directly editing current user in session
- Update error message if already logged in
- Fix submit score using username as token;
Add download endpoint
- Add osu! direct
- Refactor GetSessionBy to GetSession
- Add getfriends, lastfm and markasread handlers
- Merge pull request #10 from SunriseCommunity/feat/logging-request

Grafana dashbord + Ratelimiter in middleware.
- Update README.md
- Update docker files
- Add Prometheus metrics
- Rename Bacnho controller method Connect to Process;
If we don't have SortedSetValue in Set, Set new.
- Rename BaseApi to Api controller. Add /limits endpoint
- Add W3CLogging to file;
Add RateLimit middleware with headers;
Add BlockedIps with usage in middleware;
Move some configure logic from Program.cs to Bootstrap.cs
Add healthbeat
- Return user ip as IPAddress. Use RateLimit-Reset if given
- Merge pull request #9 from SunriseCommunity/ref/remove-big-redis-cache-chunks

Cache only light records in Redis.
- Small fixes
- Add todo comment
- Use config methods only after serviceprovider is set
- Use new RedisKey in Database; Save in Redis only records of files, not files itself
- Rewrite RedisKey class. From const to statis methods.
- Add Fill function for Configuration in ExternalApi
- Small clean up in code
- Update Configuration
- Merge pull request #8 from SunriseCommunity/feat/external-apis

Limit usage of external API's
- Add comment
- Fix not getting username while score submitting
- Add .gitkeep for Beatmaps folder
- Implement new external api logic
- Add BeatmapFile and ExternalApi in DB
- Store Ip in Location object for future
- Minor fixes and clean up
- Merge pull request #7 from SunriseCommunity/feat/enhance-chat-commands

Enhance chat commands
- Add silence/unsilence commands.
- Add !rs command (get recent score)
- Add user restriction via commands.
- Add whois command, fix whoami having logic for global usage
- Clear GetUser method
- Fix finding user by passhash (stupid).
- Update README.md
- Fix announcement message if no prev best score. Also send only onle if got number 1.
- Add whoami and roll command. Add isGlobal field to chat commands
- If can't find by beatmapSetId, fallback to hash
- Add maintenance mode
- Little refactor for BeatmapService and ScoreService
- Merge pull request #6 from SunriseCommunity/feat/friends

Implement friend system for users, small QOL features
- Handle leaderboard types; Announce #1 place on map
- Allow friend to send messages to users with ignorenonfriendpm
- Add handlers for friend add/remove
- Add friends field for User
- Merge pull request #5 from SunriseCommunity/feat/chat

QOL changes and chat Implementation
- Change README.md
- Minor changes
- Create RequestsHelper
- Add missing RU region to CountryCodes
- Add PacketHandler
- Session can send messages; Enchance user attributes fields
- Change some Serializable objects
- Get beatmap set ip from scores request
- Add ChatChannel object, some other changes small
- Add handle for ClientAway
- Add email field to user; +For bot's id get Bot.png
- Use IServiceProvider to get services
- Add chats, chat command, chat channels and chat bot.
- Parse more data from login. Handle registration from game client;
- Move Handlers; Add PacketHandler attribute; Get Handler by Attribute
- If user has invalid token, ask him to relogin
- Update error info data is found for endpoint
- Revert "ref: Clear inactive sessions each 30 seconds, not 1 minute"; Too unstable, can unlog connected users
- Update .gitignore
- Clear inactive sessions each 30 seconds, not 1 minute
- Update README.md
- Merge pull request #4 from SunriseCommunity/ref/feat/fix/docs/release/db/hatsune-miku

Big (again) feature focused PR
- Remove unused files
- Forgot to add some beatmap objects
- Implement scores helper
- Add auth helper to disallow interact with server if user not logged in
- Implement requests used to simplify services query/form of requests
- Move session repository
- Move Location object
- Move helpers
- Move Session and userAttributes; +Some refactoring?
- Move and refactor services;
Add new services;
- Move and refactor controllers
- Move DB Schemas to Models
- Move handlers;
- Move Database.cs file;
Add redis usage in db;
Update Database.cs
- Move Program.cs file; Update Program.cs file
- Move Types folder
- Add Calculators to utils for pp/accuracy calculations
- Add basic Utils;
- Update Sunrise.csproj;
Update from net7 to net8
- Move Utils to single folder;
Mode handlersDictionary to utils;
Combine Parsers and ScoreDecoder to Parsers
- Move default Data files; Add default banner
- Updaye launchSettings to use certificate on sunrise.local; +clean up
- Add ROsu-pp for pp calculations
- Update README.md
- Add LICENSE
- Merge pull request #3 from SunriseCommunity/ref/massive-refactor

Massive refactor of PlayersPool üèä to Sessions üì®
- PongHandler was removed by mistake. Fixed.
- Update README.md
- Update Program.cs file
- Update ServiceProvider to use new SessionRepository
- Return each UserData of players on UserStatsRequest
- Update user's status on receiving userStatusHandler
- Update StatusRequestOwnHandler to use new session object
- Implement ClientUserPresenceRequest
- Gracefully handle Disconnect by user; Send to all that the user has disconnected
- Clean up BanchoController from old logic
- Rename ConnectionService > LoginService, add Reject and Proceed methods.
- Update namespace for Enums
- Remove PacketQuery, replaced by PacketWriter
- Make handlers use new session object
- Implement RegionHelper to set users country etc.
- Add file and score service for controllers, a little bit late notice
- Remove PlayerObject, replaced by Session
- Implement PacketWriter - now working with packets at ease!
- Implement UserAttributes
- Replace PlayerPoolService with SessionRepository
- Rename each scheme to clear "Scheme" ending
- Remove token from UserScheme, rename to just User
- Add moved files from WebClient to GameClient; Rename some controllers; Add menu-content endpoint
- Clean up repeated Enums
- Move WebServer to GameClient. Leave WebClient as API controller
- Merge pull request #2 from SunriseCommunity/user/player-handling

Still trying to set up the structure and implement features
- Update README.md
- Implement ServiceProvider for Database and PlayersPoolService
- Little tweaks to GameClient/Types
- Implement ConnectionService
- WIP PlayersPoolService
- Remove old ScoreService
- Fix BanchoService sending empty packet after login for UserId; Add SendFriendsList handler; Add BanchoMaintence handler
- Small GameClient/Handlers tweaks
- Remove HandleLogin from PlayerController and rename to BanchoController
- Remove BeatmapController.cs for now
- I forgor for what purpose I've added this
- Remove Score Object and Edit PlayerObject
- Clear ScoreDecoder
- Move Controllers business logic to services +Score submition handle
- Move HandlerDictionary.cs
- Add WatsonORM for Database
- Fix .gitignore handling as a background
- Merge pull request #1 from SunriseCommunity/refactor

Big refactor üéäüéäüéä
- Create README.md
- Update Program.cs and .gitignore file
- Create WebServer to handle all a.ppy.sh and osu.ppy.sh requests
- Init GameClient folder with new structure and changes to original code base
- Add Utils and Types for both Web/GameClient servers
- Create Database folder w/logic
- Remove (moved) server components
- Update .csproj file
- Did something after 1mnth. I'm happy. üòä
- Removed that big switch case. Still bad but readable. Also If a player plays a map with a mod (or mods), this is now shown in the status.
- Users can now see when anyone is leaving or join osu server. Also removed some usings.
- Merge remote-tracking branch 'origin/master'
- Init commit
- Add BanchoService.cs, LoginParser.cs, LoginResponses.cs, PacketQueue.cs, PacketTypes.cs and interaction logic

This commit adds BanchoService.cs, LoginParser.cs, LoginResponses.cs, PacketQueue.cs, and PacketTypes.cs files, which lay the groundwork for the Bancho service's functionality to handle player interactions like login, sending and receiving of packets, status reporting. This commit includes methods for enqueuing packets and also for sending packets/response like LoginResponse, ProtocolVersion, Privilege, UserData, UserStats, etc. The enums 'LoginResponses' and 'PacketTypes' are added which cover various types of responses and packets used in the system. LoginParser.cs is used to parse the login details. A PlayerRepository has been initialized for access to player data for this service.
- Init commit

#### <!-- 5 -->üé® Styling

- Removing a comment. Someone hated this comment more than I did.

#### <!-- 6 -->üß™ Testing

- Add additional tests covering country change endpoint.
- Add tests covering country change implementation.
- Add TestFavouritesForRestrictedUser
- Test: Add ApiUserMostPlayedMapsRedisTests.cs;
fix: Update CreateTestScore to insert given score, not create new;
- Add more usernames to test during registration;
- Add ApiUserFavouritesRedisTests.cs;
- Test: Add ApiUserLeaderboardTests;
chore: Add query checks for user/leaderboard;
- Add ApiUserSearchTests.cs;
- Add ApiUserEditFriendStatusTests.cs;
- Add ApiUserPasswordChangeTests;
- Add ApiUserUsernameChangeTests.cs;
- Add ApiUserGetUserGraphTests.cs;
- Add ApiUserEditDescriptionTests.cs
- Add ApiUserGetSelfTests.cs
- Add ApiUserGetUserTests
- Test: Add ApiBeatmapSetFavouriteRedisTests
ref: If beatmapset has favourite, but doesnt has session, send  401;
- Test: Add ApiBeatmapFavouritedTests.cs
ref: Add FavouritedResponse;
- Mock ObservatoryUrl
- Add ApiBeatmapLeaderboardTest.cs
- Add ApiBeatmapSetTest.cs
- Add ApiBeatmapTest.cs

#### <!-- 7 -->‚öôÔ∏è Miscellaneous Tasks

- Env prefer MYSQL_DATABASE naming
- Remove unused dependency from docker compose
- Remove database logic (moved into fixture) from SunriseServerFactory
- Revert temp change
- Remove unneeded throw
- Add explanation
- Add metrics to possible issue with scores being not submitted due to session not being found;
- Fix some grammar mistakes;
- Add space before formattedReason for YourAccountIsRestricted error message;
- Mention that the time of reset in UTC+0;
- Disable backup for dev env;
- Clear unneeded Console.WriteLines;
- Add BeatmapHype properties to configuration files;
-  chore: Remove unneeded call to get user for SendFriendsList;
- Chore: Remove duplicate CI on value;
feat: Add IgnoreMaintenanceAttribute;
feat: Add IgnoreMaintenance attributes for base and auth endpoints;
feat: Add is_on_maintenance attribute to status response;
ref: Move if checking self friendship status check before doing request for requesting user to db;
ref: Move check of ModelState before getting user for change current username;
- Change default CallsPerWindow values for ratelimits to a bigger value;
- Update response cache value to be much up-to-date for API;
- Update response cache value to be much up-to-date for API;
- Add "SslMode=None;" to database connection string;
- Change port for dev MYSQL database instance;
- Remove deprecated SQLite migrations;
- Update error message if couldn't mark score as deleted for recalculation;
- Update beatmap in game link to be clickable in game;
- Fix example message for flush cache
- Update README.md
- Fix example flushcache command usage;
- Remove redundant Middlewars folder mention from Sunrise.API.csproj
- Use methods to set default request headers for HttpClientService;
- Update comments
- Remove obsolete Migration Model
- Make pageSize for SaveStatsSnapshot from 10 to 100;
- Remove unused rediskey's
- Rename comment to be more explanotary
- Remove MigrationHelper
- Chore: Remove CreateMD5 method (duplicate of ToHash);
ref: Move extensions by folders;
- Chore: Update Microsoft.AspNetCore.OpenApi;
feat: Remove redundant Swagger;
- Remove old fields from .gitignore
- Rename UseHangfire variable in config to UseHangfireServer
- Clear SunriseServerFactory.cs
- Add Redis suffix for ScoreServiceSubmitScoreTests
- Better HttpStatusCode import for ApiAuthTokenTests;
- Update .gitignore to include .osu and .osr file from Resources;
- UserHash and OsuVersion should be always provided in UserAttributes;
- Remove ObservatoryUrl port
- Rename DataTest to Data.Tests;
- Split Api tests to multiple files, each file for single endpoint;
- Update README.md
- Update dotnet.yml
- Update dotnet.yml
- Chore: Clear up Data_Tests folder
chore: Rename Data_Tests folder to DataTest
- Set default UserPrivileges for User;
- Add Expose-Headers for Content-Disposition;
- Restrict command now restricts for 10 years;
- Add TODO
- Convert mode to GameMode early on;
- Add South Korea country code
- Use more regular if check and error response for reset password endpoint
- Corrected naming for appropriate ones and for more informative error responses
- Chore: Use cached all users (related to prev. commit)
chore: Check if user is not null before checking if he is restricted in Calculator
- Fix useless check for null with check of Count in Array
- Remove unused ScoreService.cs for API
- Chore: Rename IsRanked to IsScoreable for score;
feat: Deprecate LocalScore in favour of LocalProperties in score;
- Obsolete note in config file, since it's meaning included in README.md
- Split Database.cs to smaller database services;
- Remove useless comments
- Update README.md
- Remove unused external API;
- Don't freak out if no banner/avatar in db

#### <!-- 8 -->üì¶ Dependencies

- Merge pull request #90 from SunriseCommunity/dependabot/nuget/Sunrise.Shared/SixLabors.ImageSharp-3.1.11
- [dependency] Update SixLabors.ImageSharp from 3.1.7 to 3.1.11

---
updated-dependencies:
- dependency-name: SixLabors.ImageSharp
  dependency-version: 3.1.11
  dependency-type: direct:production
...

Signed-off-by: dependabot[bot] <support@github.com>
- Merge pull request #56 from SunriseCommunity/dependabot/nuget/Sunrise.Shared/SixLabors.ImageSharp-3.1.7

chore(deps): bump SixLabors.ImageSharp from 3.1.6 to 3.1.7 in /Sunrise.Shared
- [dependency] Update SixLabors.ImageSharp in /Sunrise.Shared
- Merge pull request #41 from SunriseCommunity/dependabot/nuget/System.Linq.Dynamic.Core-1.6.0

chore(deps): bump System.Linq.Dynamic.Core from 1.4.5 to 1.6.0
- [dependency] Update System.Linq.Dynamic.Core from 1.4.5 to 1.6.0


### üåá Sunset

#### <!-- 0 -->üöÄ Features

- Update node version in ci
- Small lint related changes
- Lint
- Set up lint
- Use @richardscull/eslint-config config
- Add fallback font for cyrillic
- Add even more supported languages
- Add custom language
- Add LanguageSelector and deprecate temporary one
- Add localisation for components
- Localise user page
- Localise settings page
- Localise beatmapsets page
- Localise beatmaps page
- Localise friends page
- Localise leaderboard page
- Localise score page
- Localise topplays page
- Localise support page
- Localise register page
- Localise rules page
- Localise wiki page
- Localise main page metadata
- Create useT hook which extends useTranslations with custom default tags
- Add context for locale messages
- Localise main page
- Use router to refresh page on translation change and fallback to english if no translation
- Add cookies and save state to change locale
- Add i18n framework support
- Use BeatmapSuggestedSubmissionStatusesTooltip
- Add "Search by Custom Status"
- Don't load beatmaps search for header if query is empty
- Use api to avoid cors
- Show gatari and akatsuki suggestions
- Add metadata layout for admin pages
- Add build workflow
- Show warning before accessing events tab in admin user edit page
- Show user ID in header of edit user admin page
- Events page and url query improvements
- Show admin sidebar based on privileges
- Better scalability on phones and check for privilege for admin user edit and beatmap edit
- Move reminder label for descriptions into the user settings /w flex-grow on shrunk for admin panel
- Update leaderboard mods selector to new icons
- Implement mod icons for score screen
- Implement "Spacious UI" toggle
- Add AdminUserPrivilegeInput
- Add admin user edit page
- Move change description logic into the component
- Add users search admin panel
- Show previous username in profile;
- Use ProblemDetailsResponseType to get error message
- Add ability to change user flag in settings;
- Add missing MF flag asset;
- Update wiki how-to-connect guide;
- Add cursor-pointer class to all UserDropdown items; (thanks to Setredid for pointing this out)
- Add button for HeaderAvatr for better UX;
- Parse all beatmap action buttons (including on admin page) as Links if possible;
- Add loading for PerformanceTooltip
- Feat: Add headers for all admin pages;
fix: use text-nowrap for beatmap nominator in ranking beatmap table;
- Feat: Link user beatmap nominator and small beatmap element as spans;
fix: Center pp calculator and performance tooltip for beatmap ranking table;
fix: Add md:col-span-2 for beatmap events on admin dashboard;
fix: Use black color for gradient on BeatmapSetOverview;
feat: Use half of volume for audio provider;
- Add onSuccess and onError toast messages for beatmap hype;
- Implement beatmap events logs support;
- Add performance points tooltip
- Add beatmaps status table with ability to change beatmaps status;
- Rename BeatmapStatusSearch as BeatmapStatusWeb;
- Feat: Show beatmaps requests list in admin panel;
fix: Hide friendship button for recent registered users;
fix: Open admin panel on beamtmap title Link of BeatmapSetCard;
- Feat: Add barebones admin dashboard;
fix: Use text-current for WorkInProgress element;
fix: Use bg-muted for users status bg in UserListItem element;
- Use BeatmapSetOverivew for beatmap serach list;
- Small refactoring for beatmapset page;
- Add redirect from main admin path to dashboard;
- Add beatmap search page for website;
- Feat: Add proper theme changing button for admin panel;
feat: Fill url fields for admin panel tabs;
- Add beatmaps search for admin panel;
- Add basic admin group layout
- Move website pages to (website) route group;
- Feat: Add community hype tab on beatmap page;
feat: Show custom beatmap status nominator if has any;
- Don't send user/self request without an auth token;
- Feat: Update friends tab to include followers;
feat: Add view mode options for users connections;
feat: Add UserListItem;
feat: Add local sorting for users connections;
- Feat: Add user metadata on user page;
feat: Add user followers/following counters on user page;
- Swap about me section to end of the list of general user tab;
- Feat: Rename UserBadges to UserPrivilegeBadges;
ref: Change style of UserPrivilegeBadges;
- Feat: Show user settings as accordion;
feat: Add bg-input/50 style to input element;
ref: Split avatar/banner uploads to UploadImageForm element;
fix!: Add missing useUserMetadata hook;
fix!: add missing checkbox.tsx element;
- Feat: Add new settings form elements to update user metadata;
feat: Add openapi-ts parsing to zod;
- Add x overflow for small screens on BBCodeInput preview;
- Feat: Allow table parsing throught bbcode tags;
fix: Don't override edited users text;
- Feat: Add custom BBCode parsing through BBob and custom preset;
feat: Use BBCodeInput instead of MarkdownInput;
- Feat: Show star around game mode if its users default;
feat: Add button to set new default gamemode;
- Add check for total count of top scores to show "Show more" button;
- Add ServerMaintenanceDialog on front page;
- Feat: Implement type generation via openapi-ts;
ref: Use generated types instead of written ones;
- Update README,md
- Add hover changes for user row in leaderboard;
- Add user badges on UserHoverCard and UserElement
- Feat: Add UserHoverCard;
feat: Update leaderboard banner rows for users;
feat: Don't show placeholder banner if user has none on leaderboard;
- Feat: Add loading state for friendship button;
fix: Don't show friendship button for yourself;
- Add skeleton loading for server stats;
- Feat: Remove padding left from cards to make them at the center;
feat: Update colors of ServerStatus to be adaptive for light theme;
chore: Update text-white to text-current to all possible light themes missbehaviours;
- Feat: Update design for server status icons;
feat: Add more data for server status cards;
feat: Add padding for frontpage how to join cards;
- Make text for leaderboard score stats smaller on small screens;
- Add V2 for ModsSelector;
- Make title in layout metadata consistent;
- Feat: Add more nav links to mobile nav;
feat: Add via-transparent class for users banner image;
feat: Add support us page;
- Feat: Update front page with new design;
feat: Add api route for streaming video for front page;
- Feat!: Disable button element on IsLoading active;
fix: Add isLoadingMore consts with check for use action hooks loading more data;
- Feat: Add well element parsing for beatmapset description;
fix: Wrap BeatmapDescription into a react memo to save status of opened blockquote's;
fix: Grammar mistake in login dialog;
fix: Change short parsing of timeSince to not slice strings if time is too long;
- Add location hash handling for wiki articles;
- Add blockquote parsing for beatmap description;
- Feat: Add beatmapsets search in search command;
fix: Use flex-wrap for beatmap active difficulty version string;
- Replace router.push with window.history.pushState for cases where page reload is not required;
- Implement spoilerbox parsing for beatmap description
- Add success variant for toast and use it for positive actions;
- Feat: Update register page to use new design and react-hook-form;
fix: Refer to empty string for MarkdownInput if no defaultText was provided
- Add /rules page;
- Feat!: Move discord link and osu server link as .env.local variables;
feat: Add dropdown help menu in navigation;
ref: Change my-8/mb-4 to space-y-4 for some pages;
- Feat!: Implement PPCalculatorDialog functionality;
fix: Change full naming to short for GameRuleFlagsShort;
- Add mod selector for beatmap page;
- Add ScoreLeaderboardData for users PB and top 1 in leaderboard;
- Add query mode parsing for /topplays and /user/[id] routes;
- Feat: Add query param handler for mode in beatmap page;
feat: Add localStorage for prefered number of scores per leaderboard
fix: Change onClick event to Link for user in beatmap leaderboard;
- Check if gamemode is supported for gamerule on GameModeSelector;
- Feat: Update beatmap leaderboard with new design;
feat: Add dropdown menu for beatmap leaderboard;
feat: Change count names depending on the gamemode;
- Feat: Update beatmap page to use new design;
feat: Add proper mobile UI/UX for beatmap page;
wip: Add PPCalculatorDialog element;
- Add circle outline for user online status in UserElement;
- Feat: Add ScoreStats element for score page;
fix: Set white color for beatmap title in score page;
fix: Remove strict gray text color for user status in UserElement;
- Change checkbox input to shadecn switch element for user settings;
- Feat: Use toast instead of alert method;
ref: Use ternary operator to return user settings;
- Update Password and Username Input to use zod form and shadecn Form element;
- Add aspect ratio for images on upload
- Change onClick change url to Link element;
- Feat: Truncate user username on UserElement;
feat: Hide span if includeText set to false for FriendshipButton;
- Use accordions for QnA in wiki;
- Feat: Update FriendshipButton to use shadcn button;
feat: Optimize FriendshipButton for mobile UI/UX;
- Update score page to have better mobile UI/UX;
- Update scrollUpButton to use Button element;
- Feat: Update UserScoreMinimal for better mobile UI/UX;
feat: Update BeatmapPlayedOverview for better mobile UI/UX;
- Add username tooltip in user profile;
- Update UI/UX for BeatmapSetOverview;
- Feat: Better mubile UI/UX for UserScoreMinimal;
fix: Small bugs;
chore: Change color for primary color of root theme and color for second place of primary rank;
- Hide beatmap difficulties for mobile beatmap set overview;
- Add flex-col for mobile UI/UX of ContentNotExist element;
- Feat: Use osu icons font instead of svgs;
feat: Add mobileVariant variable for GameModeSelector;
- Feat: Add toaster component;
feat: Toast message if user logged out;
- Add HeaderMobileDrawer for better mobile UI/UX
- Add vote button for osu-server-list in footer
- Make footer more accessible on the phones
- Update leaderboard page with new design
- Force dark theme for brand in header;
- Feat: Use shadcn buttons;
chore: Use theme colors for elements;
- A little bit update for buttons
- Feat: Refactor GameModeSelector;
feat: Add dropdown menu for GameModeSelector on small screens;
- Update Next.js version to 15
- Add base shadcn
- Cap best scores to 100;
- Feat: Add friends page;
feat: Add stopPropagation event call for PrettyButton;
- Feat: Add isSelected attibute for PrettyButton;
feat: Add sort buttons for users leaderboard;
- Feat: Round YAxis number in chart;
chore: Always show performance in chart window
- Add ability to view chart by rank;
- Add online indicator in user profile
- Feat: Use avatar_url and banner_url from User;
chore: Remove no-cache cache header;
fix: Fetch user for user page to not flicker with loading on gamemode change;
chore: Update grid cols css for UserTabGeneral
- Add form reset and alert after user registration;
- Show error message if cant find user
- Add SWR usage for UserTabBeatmaps;
- Use SWR for user search;
- Add user api hooks;
- Add fetcher and poster for SWR;
- Move all providers to Providers element;
- Show user level;
- Show user grades;
- Truncrate usernames in leaderboard
- Truncrate diff of map if too long
- Feat: some css fixes for better UX
fix: Add SkeletonLoading for beatmaps covers
- Add fallback image for beatmaps without cover;
- Add timestamp to image to revalidate users images;
- Update staff links to Discord server
- Update paging for API to start with 1;
- Update pages metadata to more comfort twitter patters;
- Add pages metadata;
- Feat: Add superbold button for MarkdownInput;
fix: Target selected word for formating, closes #2;
- Add html elements if beatmapset or score was not found;
- Add RestrictionProvider;
- Add error if user not found or found as restricted;
- Update password reset endpoint to new url
- Update UserFriendship variable names;
- Add change username field;
- Use limit param for search users;
- Add info that PP showed on non-ranked maps isn't real, lol;
- Support new non-standard gamemodes;
- Enchance DifficultyIcon, fix gameMode icons showing as std;
- Feat: Add "Open on Bancho" button in beatmap page;
feat: Add local options in settings;
- Add description and general information of beatmap
- Add change password field in settings
- Clear auth cookies if token is invalid
- Add restricted badge
- Disable download replay button if there is no replay
- Add redirect from beatmaps to beatmapsets
- Feat:Add beatmap page with leaderboard
fix: Get recalculated star ratign for other modes if beatmap is std but current mode isn't

#### <!-- 1 -->üêõ Bug Fixes

- Text colours css
- Use legacy tags for wiki
- Disable prefetching for links to fix missing metadata on titles
- Redirect on admin beatmaps page
- Remove start command from workflow
- Add suspense for admin users search page
- Shrink image select if needed
- Types for AdminUserPrivilegeInput
- Hydration error
- Don't hardcore table width
- Hydration errors due to nested buttons
- Counter for selected privileges
- Fix default option for spacious UI
- Fix hydration error on leaderboard mod selector
- Fix spacing and remove unneeded things
- Fix mobile positioning for mod icons
- Fix autopilot mod icon not showing up
- Fix the label for spacious UI
- Revert user changes and fix leaderboard scaling
- Reorganize and format pages
- Use ResetPasswordRequest type arg for useAdminPasswordChange
- Close maintenance window upon button click;
- Fix: Use fallback if no cover is found for small beatmal element;
feat: Merge fallBackClassName and classname for fallback;
- Disable modal for dropdown menu to fix pp calculator fields being unable to edit manually;
- Not very professional fix for tags being out of bounds sometimes;
- Allow to grow flex box of beatmap if too many difficulties;
- Allow float numbers for pp calculator accuracy value
- Rename beatmapStatusSelect.tsx to BeatmapStatusSelect.tsx;
- Show 0 if no restricted users on server status;
- Add sorting penalty for friends sorting;
- Fix: Check if beatmapset is hyped, instead of beatmap;
fix: Use some for check if user can use admin panel;
- Wrap BeatmapsSearch; to the function to fix the compiling issue couldn't parse custom params;
- Hide ranked on date if beatmapset is not ranked;
- Add key for map of BeatmapDifficultyBadge
- Change color of graveyard beatmap for better visibility;
- Throw error instad of returning null for user/self if no token is provided;
- Fix: fetch user default banner and avatar only if file is null;
chore: Fix spelling mistake in buttonPreLabel property name;
- Fix: Add overflow-hidden for UserElement to properly show friend button on small screens;
chore: Change mb-2 to gap-y-2 for UserPrivilegeBadges on user page, to not use margin if user has no badges;
chore: Change metadata valeus color to text-muted-foreground
- Parse content inside marker content in bbcode list as it is;
- Show user is restricted if cant find user;
- Change star symbol in GameModeSelector;
- Set activeMode on beatmapsets page if beatmp id is provided;
- Fix: Add SCORE_V2_STANDARD for pushModesToArray if has STANDARD in enrichEnabledModesWithGameModes;
feat: Use is_ranked instead of isBeatmapRanked;
- Use poster for post request to add beatmapset to favourited;
- Fix: Set flex-shrink-0 for icon in wiki accordion items;
chore: Set black background to any beatmap image;
ref: Update #2 rank colour for better visibility;
- Fix: set point value of difficulty information value to 1;
feat: Use Button element on friends page instead of PrettyButton;
fix: Remove border bottom from header in leaderboard;
ref: Remove PrettyButton.tsx;
- Add useSelf hook for check if user can favourite beatmapset;
- Fix: Show error message in error box;
ref: Small refactors in error showing logic;
- Add suspense element for the leaderboard
- Fix!: Use indexes for sorting in sort by ranked score in leaderboard;
feat: Add sorting icons for columns in leaderboard;
ref: Use Link element instead of onClick event;
chore: Clear dead code;
- Rescale ImageSelect for smaller screens;
- Small fixes;
- Truncate score beatmap version;
- Convert dates to ms for comparison to fix stupid js autism;
- Don't wrap use rank in leaderboard
- Hide counter if no scores were found
- Ignore empty div if no data for PrettyHeader was provided
- Update ImageWithFallback with error status;
- Fix: Check for null for GameModeSelector, to allow pick value of 0 (std);
feat: Add div props as arguments for GameModeSelector
- Add turbopack config to work with @svgr/webpack
- Change colours to better fix their colour meaning
- Fix: Spelling mistake for getUserToken;
feat: Remove moveToHomepage for clearAuthCookies;
- Fix: Append exprires_in in ms, not seconds;
ref: Use SWR for BeatmapsRedirect;
- Check if total_count is not undefined for user tab scores;
- Use fetcher for layout metadata of beatmapset;
- Use string for error message if couldn't fetch user profile
- Don't render error object for error in score page;
- Ignore double dates in user stats graph
- Fix: Css for userscoreminimal;
feat: take 2 grids for topscores;
- Show status of the activeBeatmap, not beatmapSet
- Fix: Enrich enabledModes with non-standard variants
fix: Allow select other non standard leaderboard for non std mods
- If user got non-standard error code, don't dispose of auth cookies;
- Revalidate metadata layout for user related data
- Update username regex pattern for registration
- Don't try to checks snapshots, if there is none;
- Slice 60 last user stats from the start of the current day;
- Leaderboard and topplays overriding data with old requests;
- Don't put unrestricted page in div
- Update UTC+0 data from requests to local time
- Use original name of the replay while downloading;
- Show pp values for approved beatmaps;
- Fix: Fill empty days in user stats chart;
fix: Cut user stats to 70;
- Some titles of beatmaps is too long, fix with using flex-wrap
- Update time with timezones
- Use same font size for download buttons on beatmap page
- Make overflow for description and info work for edge browser
- Cut title and diff for top plays if needed
- Proper cut for long names of scores
- Text being in col if user plays map
- Change bg-color for BeatmapSetOverview
- Difficulties overflowing div
- Use page number for favourites for requests
- Fix error in wiki and add picture
- H-fit for wiki
- Dropdown menus on navbar

#### <!-- 11 -->üîÄ Merge Commits

- [chore] Merge Branch 'main' into feature/i18n-translation
- [chore] Merge Branch 'main' into feat/show-beatmaps-submission-status-on-other-servers
- [chore] Merge Branch 'main' into feat/admin-panel-edit-user
- [chore] Merge Branch 'main' into feat/beatmap-nomination-system

#### <!-- 13 -->üíº Other

- Merge pull request #32 from SunriseCommunity/feat/add-eslint-config
- Merge pull request #31 from SunriseCommunity/feature/i18n-translation
- Merge pull request #25 from asdofen/feature/i18n-translation
- Merge pull request #24 from SunriseCommunity/feat/show-beatmaps-submission-status-on-other-servers
- Merge pull request #23 from SunriseCommunity/revert-22-feat/show-beatmaps-submission-status-on-other-servers
- Revert "Show beatmap status suggestions"
- Merge pull request #22 from SunriseCommunity/feat/show-beatmaps-submission-status-on-other-servers
- Merge pull request #21 from SunriseCommunity/feat/admin-panel-edit-user
- Merge pull request #20 from ItzFireable/fix/ui-fixes
- Implement the rest of the gamemodes column scaling
- Merge pull request #18 from SunriseCommunity/feat/show-previous-usernames
- Merge pull request #17 from SunriseCommunity/chore/update-error-handling
- Merge pull request #16 from SunriseCommunity/feat/add-change-country-field
- Update README.md
- Update README.md
- Merge pull request #14 from SunriseCommunity/feat/beatmap-nomination-system
- Add BeatmapSetListItem
- Merge pull request #13 from SunriseCommunity/feat/user-metadata
- Add UserLevelProgress;
- Merge pull request #12 from SunriseCommunity/feat/use-bbcode-for-user-descriptions

Implement BBCode parsing for user descriptions
- Remove code repeatability for box and spoilerbox;
- Merge pull request #11 from SunriseCommunity/feat/show-default-user-gamemode
- Merge pull request #10 from SunriseCommunity/feat/use-hey-api-type-interfaces
- Merge pull request #6 from SunriseCommunity/feat/shadcn-ui

Design overhaul: Usage of shadcn-ui, Mobile UI/UX and new colour scheme
- Ref: Add asChild for buttons to allow Links to be pressed from any point of the Button;
fix: Use gap-2 for DifficultySelector spacing for better flex-wrap behaviour;
feat: Add text-shadow for grade character in beatmap leaderboard;
- Use short bancho beatmap link;
- Use Link element instead of onClick event for HeaderUserDropdown menu;
- Ref: Add "py-8" on layout div;
ref: Remove bad practice mt-8 usage on each page;
feat: Use space-y-4 for padding between page headers and conent;
feat: Change bg color for score beatmap image;
- Update user profile page for better mobile UI/UX
- Ref: Deprecate HeaderLoginDropdown;
feat: Add HeaderLoginDialog element;
- Ref: Rename HeaderAccount to HeaderAvatar;
feat: Update HeaderAvatar to use new HeaderUserDropdown;
- Ref: Rename HeaderDropdown to HeaderUserDropdown;
feat: Update HeaderUserDropdown to use new design;
feat: Add HeaderLogoutAlert dialog to log out;
- Ref: Rename HeaderSearchPopup to HeaderSearchCommand;
feat: Update HeaderSearchCommand to use new design:
feat: Add navigation by site using HeaderSearchCommand;
- Ref: Rename UserRankNumber to UserRankColor
feat: Add UserRankColor for user ranks and username in their profile;
- Update color on main page
- Merge pull request #5 from SunriseCommunity/feat/swr

Add SWR for API requests
- Use SWR to download replay;
- Add SWR usage for authorize method;
- Use SWR for user file upload in settings;
- Use SWR for description change;
- Use SWR for main page;
- Ref: Use SWR for password/username change on settings page;
feat: Handle 400 and 404 error codes with JSON as 200;
- Ref: Use SWR for register page;
feat: Add error interceptor for ky instance;
- Use SWR for users leaderboard;
- Use SWR in beatmapset page:
- Update BeatmapLeaderboard to use SWR;
- Ref: Use SWR for top plays page;
feat: Add pagination till 100 entities for top plays;
- Refactor score page to use SWR;
- Ref: Move api types from lib/types to hooks/api/.../types.ts;
ref: Refactor UsetTabScores to use SWR;
- Use SWR in UserTabMedals;
- Update user page and UserTabGeneral to use SWR;
- Get proper landing videos
- Beatmapset page + user loved beatmaps
- Add beatmaps tab for user
- Add fix for user stats chart
- Change img to Image element
- Update leaderboard and add fallback to banner images
- Fix user stats chart
- Add top plays tab
- Hide about me tab if no description provided
- Add user description with markdown formatting
- Rank chart fix
- Make clicking on profile in leaderboard open it in current tab
- Add scroll up button
- Update wiki
- Small edit to register and login fields
- Add register page
- Add search button on navbar;
Other small style change;
- Round pp values and dont show it if map is unranked
- Update README.md
- Update README.md
- Fix key probem in leaderboard
- Add country rank and best rank
- Use new graph endpoint with snapshots;
- Add user/medals tab;
Fix naming of play_time field;
- Add dockerfile etc etc
- Add leaderboard
- Change combo color if max on score page
- Show mods on score page
- Add download replay button for score
- Add score page
- Add simple wiki page
- Fix "user has no scores" flashing furing load
- Add settings page
- Add flag images
- Add missing images
- Update favicon.ico
- Add user profile
- Create front page with navigation menu
- Clean up
- Update LICENSE
- Init nextjs template
- Initial commit

#### <!-- 7 -->‚öôÔ∏è Miscellaneous Tasks

- Small fixes
- Set timezone to UTC
- Update next to latest stable version
- Use useT instead of useTranslations
- Update naming convention for locales
- Small styling changes
- Move number of filters to the left for better visibility on phones;
- Change colours for sidebar;
- Move BeatmapInfoAccordion into components folder;
- Change default sortBy for user connections to lastActive;
- Add .dockerignore
- Chore: Replace @bob/react package with @bbob/html, since we anyway use only html parser of @bbob.
ref: Remove unneded custom BBCode presets (bbcode html implements them itself)
- Remove forced type generation on dev enter;
- Change ScrollUpButton filename;
- Half the size of landing videos
- Chore: Change primary color for root color theme;
feat: Fetch the biggest possible resolution of beatmap cover for score and beatmapset page;
fix: Use bg-black for user banner in profile;
- Chore: Change primary root color once again;
feat: Add scale for BeatmapPlayedOverivew and UserScoreOverview;
feat: Remove isValidating checks to not go insane;
- Update padding values for .row-padding-max-w-2xl ruel;
- Chore: Update destructive color for dark theme;
feat: Remove padding for small screens for bigger space;
- Update gradient for footer vote text;
- Update global.css values
- Update color pallet for wiki, header and footer to use from css config;
- Cleanup unused files;
- Remove deprecated action;
- Update year in LICENSE and Footer on site
- Remove old code;
- Add more FAQ field;
- Add one more terracotta color;
- Chore: More space between status and icon on beatmap page;
fix: Don't show leaderboard if beatmap is not scoreable;
- Remove old TODOs
- Made time of submission italic and with smaller font;
- Update npm commands in README.md
- Add cursor-pointer to search button
- Wrong alt name
- Small changes
- Change divs to RoundedContent for wiki
- Don't cache current server status, add custom port to start command
- Clean up imports

#### <!-- 8 -->üì¶ Dependencies

- Merge pull request #27 from SunriseCommunity/dependabot/npm_and_yarn/micromatch-4.0.8
- [dependency] Update micromatch 4.0.8
- Merge pull request #28 from SunriseCommunity/dependabot/npm_and_yarn/multi-c22e25d29b
- [dependency] Update brace-expansion
- Merge pull request #29 from SunriseCommunity/dependabot/npm_and_yarn/glob-10.5.0
- [dependency] Update glob 10.5.0
- Merge pull request #30 from SunriseCommunity/dependabot/npm_and_yarn/js-yaml-4.1.1
- [dependency] Update js-yaml 4.1.1
- Merge pull request #26 from SunriseCommunity/dependabot/npm_and_yarn/next-15.4.8
- [dependency] Update next 15.4.8
- Merge pull request #8 from SunriseCommunity/dependabot/npm_and_yarn/nanoid-3.3.11

chore(deps): bump nanoid from 3.3.7 to 3.3.11
- [dependency] Update nanoid 3.3.11
- Merge pull request #9 from SunriseCommunity/dependabot/npm_and_yarn/babel/runtime-7.27.0

chore(deps): bump @babel/runtime from 7.25.6 to 7.27.0
- [dependency] Update @babel/runtime 7.27.0



## License
This project is licensed under the [MIT License](https://github.com/SunriseCommunity/Solar-System/blob/main/LICENSE)
*This changelog was automatically generated with [git-cliff](https://github.com/orhun/git-cliff).*
